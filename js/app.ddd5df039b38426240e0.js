(()=>{"use strict";var t,e,r,o,a,s,n={134:(t,e,r)=>{var o=r(260),a=Object.create(null),s="undefined"==typeof document,n=Array.prototype.forEach;function i(){}function l(t,e){if(!e){if(!t.href)return;e=t.href.split("?")[0]}if(u(e)&&!1!==t.isLoaded&&e&&e.indexOf(".css")>-1){t.visited=!0;var r=t.cloneNode();r.isLoaded=!1,r.addEventListener("load",(function(){r.isLoaded||(r.isLoaded=!0,t.parentNode.removeChild(t))})),r.addEventListener("error",(function(){r.isLoaded||(r.isLoaded=!0,t.parentNode.removeChild(t))})),r.href="".concat(e,"?").concat(Date.now()),t.nextSibling?t.parentNode.insertBefore(r,t.nextSibling):t.parentNode.appendChild(r)}}function c(t){if(!t)return!1;var e=document.querySelectorAll("link"),r=!1;return n.call(e,(function(e){if(e.href){var a=function(t,e){var r;return t=o(t),e.some((function(o){t.indexOf(e)>-1&&(r=o)})),r}(e.href,t);u(a)&&!0!==e.visited&&a&&(l(e,a),r=!0)}})),r}function d(){var t=document.querySelectorAll("link");n.call(t,(function(t){!0!==t.visited&&l(t)}))}function u(t){return!!/^[a-zA-Z][a-zA-Z\d+\-.]*:/.test(t)}t.exports=function(t,e){if(s)return console.log("no window.document found, will not HMR CSS"),i;var r,n,l,u=function(t){var e=a[t];if(!e){if(document.currentScript)e=document.currentScript.src;else{var r=document.getElementsByTagName("script"),s=r[r.length-1];s&&(e=s.src)}a[t]=e}return function(t){if(!e)return null;var r=e.split(/([^\\/]+)\.js$/),a=r&&r[1];return a&&t?t.split(",").map((function(t){var r=new RegExp("".concat(a,"\\.js$"),"g");return o(e.replace(r,"".concat(t.replace(/{fileName}/g,a),".css")))})):[e.replace(".js",".css")]}}(t);return r=function(){var t=u(e.filename),r=c(t);if(e.locals)return console.log("[HMR] Detected local css modules. Reload all css"),void d();r?console.log("[HMR] css reload %s",t.join(" ")):(console.log("[HMR] Reload all css"),d())},n=50,l=0,function(){var t=this,e=arguments,o=function(){return r.apply(t,e)};clearTimeout(l),l=setTimeout(o,n)}}},260:t=>{t.exports=function(t){if(t=t.trim(),/^data:/i.test(t))return t;var e=-1!==t.indexOf("//")?t.split("//")[0]+"//":"",r=t.replace(new RegExp(e,"i"),"").split("/"),o=r[0].toLowerCase().replace(/\.$/,"");return r[0]="",e+o+r.reduce((function(t,e){switch(e){case"..":t.pop();break;case".":break;default:t.push(e)}return t}),[]).join("/")}},321:(t,e,r)=>{r.r(e);var o=r(134)(t.id,{locals:!1});t.hot.dispose(o),t.hot.accept(void 0,o)},174:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const o=r(104),a=r(888),s=new(r(699).Model),n=new a.Controller(s);new o.View(n,s)},921:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CartController=void 0;const o=r(295);e.CartController=class{constructor(t,e){this.model=t,this.routerController=e}toggle(t){this.model.toggleCart(t),this.model.applyCart()}quickBuy(t,e,r){t.preventDefault(),localStorage.setItem("with.popup","1"),this.model.inCart(e)||this.model.toggleCart(e),this.routerController.route(r,t)}makeOrder(){this.model.makeOrder()}resetCart(){this.model.resetCart()}changeQantity(t,e){this.model.changeQantity(t,e)}switchPage(t){this.model.switchPage(t)&&this.routerController.addUrlParam([[o.PaginationParams.CURRENT_PAGE,this.model.pagination.currentPage.toString()]],"/cart/")}applyPerPage(t){this.model.applyPerPage(t)&&this.routerController.addUrlParam([[o.PaginationParams.PER_PAGE,t.toString()]],"/cart/")}applyPromo(t){this.model.applyPromo(t)}verifyPromo(t){return this.model.verifyPromo(t)}removePromo(t){this.model.removePromo(t)}}},268:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FilterController=void 0;const o=r(926);e.FilterController=class{constructor(t,e){this.model=t,this.routerController=e}changeCategory(t,e){this.model.changeFilterCategory(t,e);let r=this.model.filterCategories;t?r.push(e.toString()):r=r.filter((t=>t!==e.toString())),this.routerController.addUrlParam([[o.SearchParams.CATEGORY,r.join("↕")]]),this.applyFilters()}changeBrand(t,e){this.model.changeFilterBrand(t,e);let r=this.model.filterBrands;t?r.push(e.toString()):r=r.filter((t=>t!==e.toString())),this.routerController.addUrlParam([[o.SearchParams.BRAND,r.join("↕")]]),this.applyFilters()}applyFilters(){this.model.applyFilters()}changePrice(t,e){this.model.changeFilterPrice(t,e);let[r,a]=this.model.filterPrice;r=t.toString(),a=e.toString(),this.routerController.addUrlParam([[o.SearchParams.PRICE,`${r}↕${a}`]]),this.applyFilters()}changeStock(t,e){this.model.changeFilterStock(t,e);let[r,a]=this.model.filterStock;r=t.toString(),a=e.toString(),this.routerController.addUrlParam([[o.SearchParams.STOCK,`${r}↕${a}`]]),this.applyFilters()}reset(){this.routerController.addUrlParam([[o.SearchParams.CATEGORY,""],[o.SearchParams.BRAND,""],[o.SearchParams.STOCK,""],[o.SearchParams.PRICE,""]]),this.model.initState(),this.applyFilters()}}},888:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Controller=void 0;const o=r(926),a=r(921),s=r(268),n=r(802),i=r(155);e.Controller=class{constructor(t){this.model=t,this.searchDelay=null,this.routerController=new n.RouterController(t),this.cartController=new a.CartController(t,this.routerController),this.searchController=new i.SearchController(t,this.routerController),this.filterController=new s.FilterController(t,this.routerController)}route(t,e=!1){this.routerController.route(t,e)}updateRoute(t){this.routerController.updateRoute(t)}addSearchPattern(t){this.searchDelay&&clearTimeout(this.searchDelay),this.searchDelay=setTimeout((()=>{this.searchController.addPattern(t)}),1e3)}changeFilterCategory(t,e){this.filterController.changeCategory(t,e)}changeFilterBrand(t,e){this.filterController.changeBrand(t,e)}applyFilters(){this.model.applyFilters()}applyControls(){this.model.applyControls()}applyCart(){this.model.applyCart()}changeFilterPrice(t,e){this.filterController.changePrice(t,e)}changeFilterStock(t,e){this.filterController.changeStock(t,e)}resetFilter(){this.filterController.reset()}changeLayout(t){this.model.changeLayout(t),this.routerController.addUrlParam([[o.SearchParams.LAYOUT,t]])}changeSort(t){this.model.changeSort(t),this.routerController.addUrlParam([[o.SearchParams.SORT,t]]),this.applyControls()}toggleCart(t){this.cartController.toggle(t)}quickBuy(t,e,r){this.cartController.quickBuy(t,e,r)}makeOrder(){this.cartController.makeOrder()}resetCart(){this.cartController.resetCart()}changeQantity(t,e){this.cartController.changeQantity(t,e)}switchPage(t){this.cartController.switchPage(t)}applyPerPage(t){this.cartController.applyPerPage(t)}applyPromo(t){this.cartController.applyPromo(t)}verifyPromo(t){return this.cartController.verifyPromo(t)}removePromo(t){this.cartController.removePromo(t)}}},802:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RouterController=void 0;const o=r(686);e.RouterController=class{constructor(t){this.model=t}route(t,e){e&&e.preventDefault(),window.history.pushState({},"",this.makeRoute(t)),this.updateRoute(t)}updateRoute(t){this.model.setRoute(t)}addUrlParam(t,e="/"){const r=this.model.route,o=new URLSearchParams(r.searchString);for(const[e,r]of t){const t=o.has(e)?"set":"append";r?o[t](e,r):o.delete(e)}let a=`${r.origin}`;t.length&&o.toString()&&(a+=`${e}?${o}`),window.history.replaceState({},"",this.makeRoute(a)),this.model.setRoute(a,!0)}makeRoute(t){const{host:e,origin:r}=this.model.route;return e.indexOf("github.io")>0&&(t=t.replace(r.replace(o.State.deployPath,""),r+o.State.deployPath)),t}}},155:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SearchController=void 0;const o=r(926);e.SearchController=class{constructor(t,e){this.model=t,this.routerController=e}addPattern(t){this.model.changeSearchPattern(t),this.routerController.addUrlParam([[o.SearchParams.SEARCH,encodeURIComponent(t)]]),this.model.applyFilters()}}},303:(t,e,r)=>{r(321),r(174)},777:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CartModel=void 0;const o=r(686),a=r(828);e.CartModel=class{toggle(t){let e=!1;o.State.products.map((r=>(r.id===t&&(r.cart=!r.cart,e=r.cart,r.stockUsed+=e?1:-1),r))),e?(o.State.cart.push(t),o.State.cartStock[t]=o.State.cartStock[t]?o.State.cartStock[t]+1:1):(o.State.cart=o.State.cart.filter((e=>e!==t)),delete o.State.cartStock[t]),this.cartLocalStorage()}cartLocalStorage(){o.State.cart.length?localStorage.setItem("cart",JSON.stringify(o.State.cart)):localStorage.removeItem("cart"),Object.keys(o.State.cartStock).length?localStorage.setItem("cartStock",JSON.stringify(o.State.cartStock)):localStorage.removeItem("cartStock")}resetCart(){o.State.cart=[],o.State.cartStock={},o.State.products.forEach((t=>{t.cart&&(t.cart=!1),t.stockUsed=0})),this.cartLocalStorage()}changeQantity(t,e,r){let a=!0;return o.State.products.map((r=>{r.id===t&&(r.stockUsed+=e,r.stockUsed<0&&(r.stockUsed=0,a=!1),r.stockUsed>r.stock&&(r.stockUsed=r.stock,a=!1),o.State.cartStock[t]=r.stockUsed,r.stockUsed||this.toggle(t))})),Object.keys(o.State.cartStock).length||r(),this.cartLocalStorage(),a}switchPage(t,e,r){let a=!0,{currentPage:s}=r;const n=Math.ceil(t/r.perPage);return s+=e,s<1&&(s=1,a=!1),s>n&&(s=n,a=!1),o.State.pagination.currentPage=s,a}applyPerPage(t){let e=!1;return t!==o.State.pagination.perPage&&(o.State.pagination={perPage:t,currentPage:1},e=!0),e}applyPromo(t,e){let r=!1;if(Object.keys(a.PROMO).includes(e)){"number"!=typeof a.PROMO[e]||t.includes(e)||(r=!0,o.State.promo.push(e),localStorage.setItem("promo",JSON.stringify(o.State.promo)))}return r}verifyPromo(t,e){let r=!1;if(Object.keys(a.PROMO).includes(e)){"number"!=typeof a.PROMO[e]||t.includes(e)||(r=!0)}return r}removePromo(t,e){let r=!1;if(Object.keys(a.PROMO).includes(e)){"number"==typeof a.PROMO[e]&&t.includes(e)&&(r=!0,o.State.promo=o.State.promo.filter((t=>t!==e)),o.State.promo.length?localStorage.setItem("promo",JSON.stringify(o.State.promo)):localStorage.removeItem("promo"))}return r}getPerPage(t){return t?+t:5}getCurrentPage(t){return t?+t:1}}},952:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ControlsModel=void 0;const o=r(686);e.ControlsModel=class{changeLayout(t){o.State.layout=t}getLayout(t){return t||"columns"}changeSort(t){o.State.sort=t}getSort(t){return t||"default"}}},211:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FilterModel=void 0;const o=r(686);e.FilterModel=class{changeCategory(t,e){o.State.categories.map((r=>(r.id===e&&(r.checked=t),r)))}getCategories(t){return t?t.split("↕"):[]}changeBrand(t,e){o.State.brands.map((r=>(r.id===e&&(r.checked=t),r)))}getBrands(t){return t?t.split("↕"):[]}changePrice(t,e){o.State.price.from=t,o.State.price.to=e}getPrices(t){return t?t.split("↕"):[null,null]}changeStock(t,e){o.State.stock.from=t,o.State.stock.to=e}getStocks(t){return t?t.split("↕"):[null,null]}}},699:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Model=void 0;const o=r(686),a=r(49),s=r(945),n=r(211),i=r(322),l=r(952),c=r(743),d=r(177),u=r(777),p=r(926);class h extends s.Observer{constructor(){super(),this.routerModel=new i.RouterModel,this.filterModel=new n.FilterModel,this.controlsModel=new l.ControlsModel,this.searchModel=new d.SearchModel,this.cartModel=new u.CartModel,this.initState()}setRoute(t,e=!1){this.routerModel.setRoute(t),e||this.emmit("route")}get route(){return this.routerModel.route}get brands(){return o.State.brands}get categories(){return o.State.categories}get products(){return o.State.products}get layout(){return o.State.layout}get sort(){return o.State.sort}get stockRange(){return o.State.stock}get priceRange(){return o.State.price}get amount(){return o.State.amount}changeFilterCategory(t,e){this.filterModel.changeCategory(t,e)}changeFilterBrand(t,e){this.filterModel.changeBrand(t,e)}changeFilterPrice(t,e){this.filterModel.changePrice(t,e)}changeFilterStock(t,e){this.filterModel.changeStock(t,e)}changeLayout(t){this.controlsModel.changeLayout(t)}changeSort(t){this.controlsModel.changeSort(t)}get perPage(){return this.cartModel.getPerPage(this.route.searchParams.per)}get currentPage(){return this.cartModel.getCurrentPage(this.route.searchParams.page)}get filterCategories(){return this.filterModel.getCategories(this.route.searchParams.category)}get filterBrands(){return this.filterModel.getBrands(this.route.searchParams.brand)}get filterPrice(){return this.filterModel.getPrices(this.route.searchParams.price)}get filterStock(){return this.filterModel.getStocks(this.route.searchParams.stock)}get controlLayout(){return this.controlsModel.getLayout(this.route.searchParams.layout)}get controlSort(){return this.controlsModel.getSort(this.route.searchParams.sort)}get searchPattern(){return this.searchModel.getPattern(this.route.searchParams.search)}get search(){return o.State.search}get cartItems(){return o.State.products.filter((t=>t.cart))}get cartIds(){return o.State.cart}get cartStocks(){return o.State.cartStock}get pagination(){return o.State.pagination}get promo(){return o.State.promo}get cartStockTotal(){return Object.values(o.State.cartStock).reduce(((t,e)=>t+e),0)}get totalPrice(){return this.cartItems.reduce(((t,e)=>t+=e.price*e.stockUsed),0)}get totalDiscounted(){return this.cartItems.reduce(((t,e)=>+(t+=(e.price-e.price/100*e.discountPercentage)*e.stockUsed).toFixed(2)),0)}inCart(t){return o.State.cart.includes(t)}totalStock(t){return o.State.products[t].stock-o.State.products[t].stockUsed}initState(){const t=[...a],e={},r={},s=Object.assign({},o.State.stock),n=Object.assign({},o.State.price),i=this.searchPattern,l=JSON.parse(localStorage.getItem("cart")||"[]"),c=JSON.parse(localStorage.getItem("cartStock")||"[]"),d=JSON.parse(localStorage.getItem("promo")||"[]"),u=this.perPage,p=this.currentPage,h=this.filterCategories,m=this.filterBrands,[g,f]=this.filterStock,[_,v]=this.filterPrice,b=this.controlLayout,y=this.controlSort;t.forEach((t=>{const o=m.includes(t.brand.id.toString()),a=h.includes(t.category.id.toString());r[t.category.id]=Object.assign(Object.assign({},t.category),{checked:a}),e[t.brand.id]=Object.assign(Object.assign({},t.brand),{checked:o}),t.stock>s.max&&(s.max=t.stock),t.price>n.max&&(n.max=t.price),t.cart=l.includes(t.id),t.stockUsed=c[t.id]?+c[t.id]:0})),o.State.products=[...t],o.State.categories=[...Object.values(r)],o.State.brands=[...Object.values(e)],o.State.stock={from:g?+g:this.getRangeFrom(s),to:f?+f:this.getRangeTo(s),max:s.max},o.State.price={from:_?+_:this.getRangeFrom(n),to:v?+v:this.getRangeTo(n),max:n.max},o.State.layout=b,o.State.sort=y,o.State.search=i,o.State.cart=[...l],o.State.cartStock=Object.assign({},c),o.State.promo=[...d],o.State.pagination={perPage:u,currentPage:p}}getRangeFrom(t){return Math.round(t.max-.9*t.max)}getRangeTo(t){return Math.round(t.max-.1*t.max)}applyFilters(){const t=this.searchPattern,e=this.filterBrands,r=this.filterCategories,[a,s]=this.filterStock,[n,i]=this.filterPrice;o.State.products.map((o=>{o.show=!0,r.length&&!1===r.includes(o.category.id.toString())&&(o.show=!1),e.length&&!1===e.includes(o.brand.id.toString())&&(o.show=!1),a&&s&&(o.stock<+a||o.stock>+s)&&(o.show=!1),n&&i&&(o.price<+n||o.price>+i)&&(o.show=!1);let l=!1;return t||(l=!0),l||(l=this.searchContains(t,o.brand.name)),l||(l=this.searchContains(t,o.category.name)),l||(l=this.searchContains(t,o.title)),l||(l=this.searchContains(t,o.price.toString())),l||(l=this.searchContains(t,o.description)),l||(o.show=!1),o})),this.calculateAmounts(),this.emmit("filter.update")}calculateAmounts(){const t={},e={};let r=this.cartIds.length;const a={min:1e7,max:0},s={min:1e7,max:0},[n,i]=this.filterStock,[l,c]=this.filterPrice;o.State.products.forEach((r=>{if(r.show){const o=r.category.id,n=r.brand.id;t[o]=t[o]?t[o]+1:1,e[n]=e[n]?e[n]+1:1,a.min>r.price&&(a.min=r.price),a.max<r.price&&(a.max=r.price),s.min>r.stock&&(s.min=r.stock),s.max<r.stock&&(s.max=r.stock)}}));let d=!1,u=!1;for(const t in this.route.searchParams)this.route.searchParams[t]&&t!==p.SearchParams.STOCK&&t!==p.SearchParams.PRICE&&(s.min<1e6&&(d=!0),a.min<1e6&&(u=!0));o.State.stock={from:n?+n:d?s.min:this.getRangeFrom(o.State.stock),to:i?+i:d?s.max:this.getRangeTo(o.State.stock),max:o.State.stock.max},o.State.price={from:l?+l:u?a.min:this.getRangeFrom(o.State.price),to:c?+c:u?a.max:this.getRangeTo(o.State.price),max:o.State.price.max},r=Object.values(t).reduce(((t,e)=>t+e),0),o.State.amount={categories:t,brands:e,total:r}}applyControls(){switch(this.controlSort){case c.SortSettings.DEFAULT:o.State.products.sort(((t,e)=>t.id-e.id));break;case c.SortSettings.PRICE_LOW_TO_HIGH:o.State.products.sort(((t,e)=>t.price-e.price));break;case c.SortSettings.PRICE_HIGH_TO_LOW:o.State.products.sort(((t,e)=>e.price-t.price));break;case c.SortSettings.RATING_HIGH_TO_LOW:o.State.products.sort(((t,e)=>e.rating-t.rating));break;case c.SortSettings.RATING_LOW_TO_HIGH:o.State.products.sort(((t,e)=>t.rating-e.rating))}this.emmit("controls.update")}applyCart(){const t=this.cartIds,e=this.cartStocks;o.State.products.map((r=>(t.includes(r.id)&&(r.cart=!0),r.stockUsed=e[r.id]?e[r.id]:0,r))),this.emmit("cart.update")}resetCart(){this.cartModel.resetCart(),this.emmit("cart.update"),this.emmit("cart.reset")}changeQantity(t,e){this.cartModel.changeQantity(t,e,(()=>this.emmit("cart.null")))&&this.emmit("cart.update")}switchPage(t){const e=this.cartModel.switchPage(this.cartItems.length,t,o.State.pagination);return e&&this.emmit("cart.update"),e}applyPerPage(t){const e=this.cartModel.applyPerPage(t);return e&&this.emmit("cart.update"),e}applyPromo(t){this.cartModel.applyPromo(this.promo,t)&&this.emmit("cart.update")}verifyPromo(t){return this.cartModel.verifyPromo(this.promo,t)}removePromo(t){this.cartModel.removePromo(this.promo,t)&&this.emmit("cart.update")}changeSearchPattern(t){this.searchModel.changePattern(t)}searchContains(t,e){let r=!1;const o=t.split(" ");for(const t of o)e.toLocaleLowerCase().includes(t.toLocaleLowerCase())&&(r=!0);return r}toggleCart(t){this.cartModel.toggle(t)}makeOrder(){localStorage.setItem("with.popup","1"),this.emmit("order.create")}}e.Model=h},322:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RouterModel=void 0;const o=r(686),a=r(295),s=r(926);e.RouterModel=class{setRoute(t){o.State.route=t}get route(){const t=new URL(o.State.route);let e={},r=[];const{host:a,origin:s}=t;return[r,e]=this.getSearchString(t,"search"),r.length||([r,e]=this.getSearchString(t,"pagination")),{host:a,origin:s,searchParams:e,searchString:r.join("&"),path:t.pathname.replace(o.State.deployPath,"/").split("/")}}getSearchString(t,e){const r=[],o={};let n=Object.values(s.SearchParams);"pagination"===e&&(n=Object.values(a.PaginationParams));for(const e of n){const a=t.searchParams.get(e);o[e]=a,a&&r.push(`${e}=${a}`)}return[r,o]}}},177:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SearchModel=void 0;const o=r(686);e.SearchModel=class{changePattern(t){o.State.search=t}getPattern(t){return t?decodeURIComponent(t):""}}},686:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.State=void 0,e.State={route:window.location.href,deployPath:"/online-shop",pagination:{perPage:5,currentPage:1},products:[],categories:[],brands:[],cart:[],cartStock:{},promo:[],search:"",price:{from:0,to:0,max:0},stock:{from:0,to:0,max:0},amount:{categories:{},brands:{},total:0},layout:"",sort:""}},386:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Card=void 0,function(t){t.DEFAULT="icon--default",t.AMERICAN_EXPRESS="icon--american-express",t.VISA="icon--visa",t.MASTERCARD="icon--mastercard"}(e.Card||(e.Card={}))},295:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PaginationParams=void 0,function(t){t.PER_PAGE="per",t.CURRENT_PAGE="page"}(e.PaginationParams||(e.PaginationParams={}))},828:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PROMO=void 0,function(t){t[t.RSS=10]="RSS",t[t.HOBBIE=20]="HOBBIE"}(e.PROMO||(e.PROMO={}))},102:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Routing=void 0,function(t){t.MAIN="/",t.CART="cart",t.PRODUCTS="product"}(e.Routing||(e.Routing={}))},926:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SearchParams=void 0,function(t){t.CATEGORY="category",t.BRAND="brand",t.PRICE="price",t.STOCK="stock",t.SORT="sort",t.SEARCH="search",t.LAYOUT="layout"}(e.SearchParams||(e.SearchParams={}))},743:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SortSettings=void 0,function(t){t.DEFAULT="default",t.PRICE_LOW_TO_HIGH="price-low-to-high",t.PRICE_HIGH_TO_LOW="price-high-to-low",t.RATING_HIGH_TO_LOW="rating-high-to-low",t.RATING_LOW_TO_HIGH="rating-low-to-high"}(e.SortSettings||(e.SortSettings={}))},898:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.headStyle=void 0,e.headStyle={clearHeadStyle(){var t;const e=document.getElementsByTagName("style");if(e)for(const r of e)null===(t=r.parentNode)||void 0===t||t.removeChild(r)},getHeadStyle:()=>document.head.appendChild(document.createElement("style"))}},758:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ModalWindow=void 0;e.ModalWindow=class{constructor(){this.overlay=this.createDomNode("div","overlay","overlay--modal"),this.modal=this.createDomNode("div","modal"),this.modalContent=this.createDomNode("div","modal__content"),this.modalCloseButton=this.createDomNode("span","modal__close-icon","icon","icon--close")}buildModal(t){this.setContent(t),this.appendModalElements(),this.bindCloseModalEvents(),this.openModal()}createDomNode(t,...e){const r=document.createElement(t);return r.classList.add(...e),r}setContent(t){this.modalContent.innerHTML="",this.modalContent.append(t)}appendModalElements(){this.modal.append(this.modalCloseButton),this.modal.append(this.modalContent),this.overlay.append(this.modal)}bindCloseModalEvents(){this.modalCloseButton.addEventListener("click",(t=>this.closeModal(t))),this.overlay.addEventListener("click",(t=>this.closeModal(t)))}openModal(){document.body.append(this.overlay),document.body.classList.add("body--scroll__disable")}closeModal(t){if(t){const e=t.target.classList;(e.contains("overlay")||e.contains("modal__close-icon"))&&this.removeModal()}}removeModal(){var t;null===(t=document.querySelector(".overlay"))||void 0===t||t.remove(),document.body.classList.remove("body--scroll__disable")}}},945:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Observer=void 0;e.Observer=class{constructor(){this.events={}}on(t,e){var r,o;null!==(r=(o=this.events)[t])&&void 0!==r||(o[t]=[]),this.events[t].push(e)}off(t){delete this.events[t]}emmit(t,e){if(this.events[t])for(const r of this.events[t])r(e)}}},580:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PopupWindow=void 0;e.PopupWindow=class{constructor(){this.popup=this.createDomNode("div","popup"),this.popupContent=this.createDomNode("div","popup__content")}buildPopup(t){this.setContent(t),this.appendPopupElements(),this.showPopup()}createDomNode(t,...e){const r=document.createElement(t);return r.classList.add(...e),r}setContent(t){this.popupContent.innerHTML="",this.popupContent.append(t)}appendPopupElements(){this.popup.append(this.popupContent)}showPopup(){document.body.append(this.popup),setTimeout((()=>{this.popup.classList.add("popup--show")}),1e3),setTimeout(this.closePopup,5e3)}closePopup(){const t=document.querySelector(".popup");null==t||t.classList.remove("popup--show"),null==t||t.addEventListener("transitionend",(()=>{var t;null===(t=document.querySelector(".popup"))||void 0===t||t.remove()}))}}},690:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RangeSlider=void 0;e.RangeSlider=class{constructor(t,e,r){this.model=t,this.controller=e,this.type=r,this.arrOfId=[`${this.type}-range-from`,`${this.type}-range-to`,`${this.type}-input-from`,`${this.type}-input-to`],this.wrapper=this.createDomNode("div","range-filter"),this.controls=this.createDomNode("div","range-filter__controls"),this.rangeControlFrom=this.createDomNode("input","range-filter__range"),this.rangeControlTo=this.createDomNode("input","range-filter__range"),this.values=this.createDomNode("div","range-filter__values"),this.rangeValueFrom=this.createDomNode("span","range-filter__value"),this.rangeValueTo=this.createDomNode("span","range-filter__value")}buildRangeSlider(){return this.initId(),this.initInputs(),this.initDefaultValues(),this.appendElements(),this.bindEvents(),this.fillColorBetween(),this.wrapper}createDomNode(t,e){const r=document.createElement(t);return r.classList.add(e),r}initId(){[this.rangeControlFrom.id,this.rangeControlTo.id,this.rangeValueFrom.id,this.rangeValueTo.id]=this.arrOfId}initInputs(){let t={max:100,from:50,to:80};"price"===this.type&&(t=this.model.priceRange),"stock"===this.type&&(t=this.model.stockRange);const{max:e,from:r,to:o}=t;this.rangeControlFrom.type="range",this.rangeControlFrom.min="0",this.rangeControlFrom.max=e.toString(),this.rangeControlFrom.value=r.toString(),this.rangeControlTo.type="range",this.rangeControlTo.min="0",this.rangeControlTo.max=e.toString(),this.rangeControlTo.value=o.toString()}initDefaultValues(){let t={max:100,from:50,to:80};"price"===this.type&&(t=this.model.priceRange),"stock"===this.type&&(t=this.model.stockRange);const{from:e,to:r}=t;this.rangeValueFrom.innerText=e.toString(),this.rangeValueTo.innerText=r.toString()}appendElements(){this.controls.append(this.rangeControlFrom,this.rangeControlTo),this.values.append(this.rangeValueFrom,this.rangeValueTo),this.wrapper.append(this.controls,this.values)}bindEvents(){this.rangeControlFrom.addEventListener("input",(()=>this.controlRangeFrom(parseInt(this.rangeControlFrom.value,10),parseInt(this.rangeControlTo.value,10)))),this.rangeControlTo.addEventListener("input",(()=>this.controlRangeTo(parseInt(this.rangeControlFrom.value,10),parseInt(this.rangeControlTo.value,10)))),this.rangeControlFrom.addEventListener("mouseup",(()=>{this.applyRange(parseInt(this.rangeControlFrom.value,10),parseInt(this.rangeControlTo.value,10))})),this.rangeControlTo.addEventListener("mouseup",(()=>{this.applyRange(parseInt(this.rangeControlFrom.value,10),parseInt(this.rangeControlTo.value,10))}))}applyRange(t,e){"price"===this.type&&this.controller.changeFilterPrice(t,e),"stock"===this.type&&this.controller.changeFilterStock(t,e)}controlRangeFrom(t,e){this.fillColorBetween(),t>e?[this.rangeControlFrom.value,this.rangeValueFrom.innerHTML]=[`${e}`,`${e}`]:this.rangeValueFrom.innerHTML=`${t}`}controlRangeTo(t,e){this.fillColorBetween(),t<=e?[this.rangeControlTo.value,this.rangeValueTo.innerHTML]=[`${e}`,`${e}`]:[this.rangeValueTo.innerHTML,this.rangeControlTo.value]=[`${t}`,`${t}`]}fillColorBetween(){const t=parseInt(this.rangeControlFrom.max)-parseInt(this.rangeControlTo.min),e=parseInt(this.rangeControlFrom.value)-parseInt(this.rangeControlTo.min),r=parseInt(this.rangeControlTo.value)-parseInt(this.rangeControlTo.min);this.rangeControlTo.style.background=`linear-gradient(\n      to right, #C6C6C6 0%,\n      #C6C6C6 ${e/t*100}%,\n      #976464 ${e/t*100}%,\n      #976464 ${r/t*100}%,\n      #C6C6C6 ${r/t*100}%,\n      #C6C6C6 100%)`}}},788:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Utils=void 0,e.Utils={actions:{},addEvent(t,e,r){const o="string"==typeof t?this.id(t):t,a=t=>r(t),s=`${o.className}-${e}-${r}`;this.actions[s]&&o.removeEventListener(e,this.actions[s]),o.addEventListener(e,a,{passive:!0}),this.actions[s]=a},id(t){const e=document.querySelectorAll(t);for(const t of e)t.css=e=>(e?t.setAttribute("style",e):t.removeAttribute("style"),t),t.html=e=>(t.innerHTML=e,t),t.clear=()=>{for(;t.firstChild;)t.removeChild(t.firstChild);return t},t.class=(e,r=!1)=>(t.classList[r?"remove":"add"](e),t);return 1===e.length?e[0]:e.length?e:null},ids(t){const e=document.querySelectorAll(t);return e.length?e:null},create(t="",e="div"){const r=document.createElement(e);return r.className=t,r}}},935:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CartListView=void 0;const o=r(788);e.CartListView=class{constructor(t,e){this.controller=t,this.model=e}render(t){t.innerHTML="";const e=o.Utils.create("cart-section__shopping shopping","div");this.fill(e),t.append(e),this.addHandlers(),this.addLocalHandlers()}fill(t){t.append(this.addTitle()),this.fillTable(t)}addTitle(){const t=o.Utils.create("shopping__title title","h2");return t.innerText="Моя корзина",t}fillTable(t){t.innerHTML="";const e=o.Utils.create("shopping__table shopping-table","table");let r="";r+=this.addTableHead(),r+=this.addTableBody(),r+=this.addTableFooter(),e.innerHTML=r,t.append(e)}addTableHead(){return'<thead class="shopping-table__head">\n                                    <tr class="shopping-table__head-row">\n                                        <th>№</th>\n                                        <th>Фото</th>\n                                        <th>Название</th>\n                                        <th>Категория</th>\n                                        <th>Бренд</th>\n                                        <th>Цена</th>\n                                        <th>Наличие</th>\n                                        <th>Количество</th>\n                                        <th>Сумма</th>\n                                    </tr>\n                                </thead>'}addTableBody(){const{perPage:t,currentPage:e}=this.model.pagination;let r='<tbody class="shopping-table__body">',o=1;return this.model.cartItems.forEach(((a,s)=>{Math.ceil((s+1)/t)===e&&(r+=`\n        <tr class="shopping-table__body-row table-item" id="cart-product-${a.id}">\n          <td>\n              <span class="table-item__number">${o}</span>\n          </td>\n          <td>\n              <div class="table-item__img">\n                  <img src="${a.thumbnail}" alt="Product photo">\n              </div>\n          </td>\n          <td>\n              <div class="table-item__product">\n                  <span class="table-item__title">${a.title}</span>\n              </div>\n          </td>\n          <td>\n              <span class="table-item__category">${a.category.name}</span>\n          </td>\n          <td>\n              <span class="table-item__brand">${a.brand.name}</span>\n          </td>\n          <td class="table-item__price-td">\n              <span class="table-item__price table-item__price--default">${a.price} ₽</span>\n          </td>\n          <td>\n              <span class="table-item__stock">${a.stock-a.stockUsed} шт.</span>\n          </td>\n          <td>\n              <div class="table-item__quantity">\n                  <button class="button button--quantity button--quantity-minus" data-id="${a.id}">-</button>\n                  <span class="table-item__input" id="input">${a.stockUsed}</span>\n                  <button class="button button--quantity button--quantity-plus" data-id="${a.id}">+</button>\n              </div>\n          </td>\n\n          <td class="table-item__amount-td">\n              <span class="table-item__amount" id="amount">${a.price*a.stockUsed} ₽</span>\n          </td>\n      </tr>`),o++})),r+="</tbody>",r}addTableFooter(){const{perPage:t,currentPage:e}=this.model.pagination;return`\n      <tfoot class="shopping-table__footer">\n          <tr class="shopping-table__footer-row">\n              <td colspan="4">\n                  <div class="table-item__items-on-page items-on-page">\n                      <label class="items-on-page__label" for="items-on-page">Товаров на странице</label>\n                      <input class="items-on-page__input" type="number" min=1 value="${t}" maxlength="4" id="items-on-page">\n                  </div>\n              </td>\n              <td colspan="1">\n                  <div class="table-item__pages">\n                      <button class="button button--page" id="page-back">\n                          <span class="icon icon--arrow-left"></span>\n                      </button>\n                      <span class="table-item__page">${e}</span>\n                      <button class="button button--page" id="page-forward">\n                          <span class="icon icon--arrow-right"></span>\n                      </button>\n                  </div>\n              </td>\n              <td colspan="2"></td>\n              <td colspan="2" align="right">\n                  <div class="table-item__button-reset">\n                      <button class="button button--cart-reset" id="cart-reset">Очистить корзину</button>\n                  </div>\n              </td>\n          </tr>\n      </tfoot>`}addHandlers(){const t=o.Utils.id("#cart-reset");null!==t&&o.Utils.addEvent(t,"click",(()=>{this.controller.resetCart()}))}addLocalHandlers(){const t=o.Utils.ids(".button--quantity-minus"),e=o.Utils.ids(".button--quantity-plus");if(null!==t)for(const e of t)o.Utils.addEvent(e,"click",(()=>{this.controller.changeQantity(+e.dataset.id,-1)}));if(null!==e)for(const t of e)o.Utils.addEvent(t,"click",(()=>{this.controller.changeQantity(+t.dataset.id,1)}));const r=o.Utils.id("#page-back"),a=o.Utils.id("#page-forward"),s=o.Utils.id(".items-on-page__input");null!==r&&o.Utils.addEvent(r,"click",(()=>{this.controller.switchPage(-1)})),null!==a&&o.Utils.addEvent(a,"click",(()=>{this.controller.switchPage(1)})),null!==s&&o.Utils.addEvent(s,"blur",(()=>{let t=+s.value;t<=0&&(s.value="1",t=1),this.controller.applyPerPage(t)}))}}},515:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CartTotalView=void 0;const o=r(828),a=r(788);e.CartTotalView=class{constructor(t,e){this.controller=t,this.model=e}render(t){const e=a.Utils.create("cart-section__total-bill cart-total","div"),r=a.Utils.create("cart-total__wrapper","div");this.fill(r),e.append(r),t.append(e),this.addHandlers()}fill(t){let e="";e+=this.addTitle(),e+=this.addCartTotalContent(),t.innerHTML=e}addTitle(){return'<h4 class="cart-total__title title">Детали заказа</h4>'}addCartTotalContent(){let t='<div class="cart-total__content">';return t+=this.addCartStockTotal(),t+=this.addPromoCode(),t+=this.addCartPriceTotal(),t+=this.addCartOrderButton(),t+="</div>",t}addCartStockTotal(){return`<div class="cart-total__line">\n                <span class="cart-total__line-text">Количество</span>\n                <span class="cart-total__line-dashes"></span>\n                <span class="cart-total__line-value">${this.model.cartStockTotal}шт.</span>\n            </div>`}addPromoCode(){const t=[];for(const e of this.model.promo)t.push(`\n        <div class="cart-total__line">\n          <span class="cart-total__line-text">${e}</span>\n          <span class="cart-total__line-value opacified">[${o.PROMO[e]}%]</span>\n          <span class="cart-total__line-dashes"></span>\n          <span class="icon icon--close" data-id="${e}"></span>\n        </div>\n      `);return`\n      <div class="cart-total__promo-code promo-code">\n          <div class="cart-total__line">\n              <span class="cart-total__line-text">Промокоды</span>\n              <span class="cart-total__line-dashes"></span>\n              <span class="cart-total__line-value">RSS, HOBBIE</span>\n          </div>\n\n\n          <div class="promo-code__input">\n              <input class="promo-code__text" type="text" id="promo-input" placeholder="Введите промокод">\n              <input class="promo-code__button promo-code__button-disabled" type="submit" value="Применить">\n          </div>\n\n          <div class="promo-code__applied">${t.join("")}</div>\n      </div>`}addCartPriceTotal(){const t=!!this.model.promo.length,e=this.model.totalDiscounted!==this.model.totalPrice,r=t?(this.model.totalDiscounted-this.model.totalDiscounted*this.model.promo.reduce(((t,e)=>t+=o.PROMO[e]/100),0)).toFixed(2):this.model.totalDiscounted;return`<div class="cart-total__line cart-total__default-sum">\n                <span class="cart-total__line-text cart-total__default-sum-text">Итого</span>\n                <span class="cart-total__line-dashes"></span>\n                <span class="cart-total__line-value cart-total__default-sum-value${t||e?"":" cart-total__default-sum-alone"}">${this.model.totalPrice}₽</span>\n            </div>`+(t||e?`<div class="cart-total__line cart-total__discount-sum">\n                <span class="cart-total__line-text cart-total__discount-sum-text">Со скидкой</span>\n                <span class="cart-total__line-dashes"></span>\n                <span class="cart-total__line-value cart-total__discount-sum-value">${r}₽</span>\n            </div>`:"")}addCartOrderButton(){return'<div class="cart-total__button">\n                <button class="button button--colored" id="order">Оформить заказ</button>\n            </div>'}addHandlers(){const t=a.Utils.id(".promo-code__button"),e=a.Utils.ids(".icon--close"),r=a.Utils.id("#order"),o=a.Utils.id("#promo-input");if(null!==o&&a.Utils.addEvent(o,"keyup",(()=>{const e=this.controller.verifyPromo(a.Utils.id("#promo-input").value);t.class("promo-code__button-disabled",e)})),null!==t&&a.Utils.addEvent(t,"click",(()=>{this.controller.applyPromo(a.Utils.id("#promo-input").value)})),null!==e)for(const t of e)a.Utils.addEvent(t,"click",(()=>{this.controller.removePromo(t.dataset.id)}));null!==r&&a.Utils.addEvent(r,"click",(()=>{this.controller.makeOrder()}))}}},669:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CartView=void 0;const o=r(788),a=r(935),s=r(515),n=r(552);e.CartView=class{constructor(t,e,r,i){this.controller=t,this.model=e,this.root=r,this.onCartUpdate=i,this.breadcrumbsNav=o.Utils.create("breadcrumbs-nav","div"),this.cartWrapper=o.Utils.create("cart-wrapper","div"),this.cartList=new a.CartListView(this.controller,this.model),this.cartTotal=new s.CartTotalView(this.controller,this.model),this.purchaseModal=new n.OrderModalView(this.controller,this.model),this.cartRoot=o.Utils.create("cart-section","section"),this.addListeners()}hasProductsOnPage(){let t=!1;const{perPage:e,currentPage:r}=this.model.pagination;return this.model.cartItems.forEach(((o,a)=>{Math.ceil((a+1)/e)===r&&(t=!0)})),t}addListeners(){const t=()=>{this.hasProductsOnPage()?(this.cartList.render(this.cartRoot),this.cartTotal.render(this.cartRoot),this.onCartUpdate(this.model.cartStockTotal,this.model.totalPrice,this.model.totalDiscounted)):this.controller.switchPage(-1)};this.model.on("cart.reset",(()=>this.render())),this.model.on("cart.update",t),window.addEventListener("storage",(()=>{this.model.initState(),this.controller.applyCart(),t()})),this.model.on("order.create",(()=>this.renderPurchaseModal())),this.model.on("cart.null",(()=>this.render()))}render(){this.root.html(""),this.model.cartIds.length?(this.fillBreadcrumbsNav(),this.cartWrapper.append(this.breadcrumbsNav,this.cartRoot),this.root.append(this.cartWrapper),this.renderPurchaseModal()):this.fillNoProducts(),this.controller.applyCart()}fillNoProducts(){const t=o.Utils.create("cart-section","div");t.innerText="В корзине нет товаров, перейдите на главную страницу, чтобы добавить их",t.style.justifyContent="center",this.root.append(t)}fillBreadcrumbsNav(){this.breadcrumbsNav.innerHTML='\n      <ul class="breadcrumbs-nav__list">\n        <li class="breadcrumbs-nav__item"><a class="bread__link" href="/">Главная</a></li>\n        <li class="breadcrumbs-nav__item"><a href="#" onClick="return(false);">Моя корзина</a></li>\n      </ul>'}renderPurchaseModal(){localStorage.getItem("with.popup")&&(this.purchaseModal.render(),localStorage.removeItem("with.popup"))}}},552:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OrderModalView=void 0;const o=r(758),a=r(788),s=r(386),n=r(580);e.OrderModalView=class{constructor(t,e){this.controller=t,this.model=e,this.modal=new o.ModalWindow}render(){const t=a.Utils.create("order","div");this.fill(t),this.modal.buildModal(t),this.addHandlers()}fill(t){let e="";e+=this.addTitle(),e+=this.addOrderForm(),t.innerHTML=e}addTitle(){return'<h3 class="order__title title">Данные для доставки</h3>'}addOrderForm(){return'<form class=\'order__form order-form\' id="order-form">\n                       <div class="order-form__row">\n                               <label for="full-name" class="order-form__label">\n                                   <span class="order-form__text">\n                                       Имя и фамилия\n                                       <span class="order-form__required">*</span>\n                                   </span>\n                                   <input type=\'text\' id="full-name" class=\'order-form__input\' placeholder="Иван Иванов" required>\n                               </label>\n                       </div>\n                       <div class="order-form__column">\n                           <div class="order-form__row">\n                               <label for="phone-number" class="order-form__label">\n                                   <span class="order-form__text">\n                                       Телефон\n                                       <span class="order-form__required">*</span>\n                                   </span>\n                                   <input type=\'text\' id="phone-number" class=\'order-form__input\' placeholder="(123) 456-78-90" required>\n                               </label>\n                           </div>\n                           <div class="order-form__row">\n                               <label for="email" class="order-form__label">\n                                   <span class="order-form__text">\n                                       Email\n                                       <span class="order-form__required">*</span>\n                                   </span>\n                                   <input type=\'email\' id="email" placeholder="name@email.com" class=\'order-form__input\' required>\n                               </label>\n                           </div>\n                       </div>\n                       <div class="order-form__row">\n                           <label for="address" class="order-form__label">\n                               <span class="order-form__text">\n                                   Адрес доставки\n                                   <span class="order-form__required">*</span>\n                               </span>\n                               <input type=\'text\' id="address" class=\'order-form__input\' placeholder="г. Санкт-Петербург" required>\n                           </label>\n                       </div>\n                       <div class="order-form__row card">\n                           <div class="card__content">\n                               <div class="card__row">\n                                   <label for="card-number" class="card__label">\n                                       <span class="card__text">Номер карты</span>\n                                       <input type=\'tel\' id="card-number" class=\'card__input\' placeholder=\'1234 5678 9123 4567\' maxlength="19" required>\n                                   </label>\n\n                                   <div class="card__logo">\n                                       <span class="icon icon--default"></span>\n                                   </div>\n                               </div>\n                               <label for="card-cardholder" class="card__label">\n                                   <span class="card__text">Владелец</span>\n                                   <input type=\'text\' id="card-cardholder" class=\'card__input\' placeholder="IVAN IVANOV" size="20" required>\n                               </label>\n                               <div class="card__row">\n                                   <label for="card-exp-month" class="card__label">\n                                       <span class="card__text">Действительна до</span>\n                                       <span class="card__input-columns">\n                                           <input type=\'text\' id="card-exp-month" class=\'card__input\' placeholder="00" maxlength="2" size="2" required>\n                                           <span>/</span>\n                                           <input type=\'text\' id="card-exp-year" class=\'card__input\' placeholder="00" maxlength="2" size="2" required>\n                                       </span>\n                                   </label>\n                                   <label for="card-cvc" class="card__label">\n                                       <span class="card__text">CVC</span>\n                                       <input type=\'text\' id="card-cvc" class=\'card__input\' placeholder="000" maxlength="3" size="3" required>\n                                   </label>\n                               </div>\n                           </div>\n                       </div>\n                       <input type=\'submit\' class=\'order-form__button\' value=\'Подтвердить\'>\n                   </form>'}addHandlers(){this.addCardFieldsHandlers(),this.addOrderFieldsHandlers(),this.addSubmitHandler()}addOrderFieldsHandlers(){a.Utils.addEvent("#full-name","input",(t=>this.handleTextValidation(t))),a.Utils.addEvent("#phone-number","input",(t=>this.convertPhoneNumber(t))),a.Utils.addEvent("#full-name","focusout",(t=>this.handleFullNameValidation(t))),a.Utils.addEvent("#email","focusout",(t=>this.handleEmailValidation(t))),a.Utils.addEvent("#phone-number","focusout",(t=>this.handlePhoneValidation(t))),a.Utils.addEvent("#address","focusout",(t=>this.handleAddressValidation(t)))}addCardFieldsHandlers(){const t=a.Utils.id(".card__logo .icon");a.Utils.addEvent("#card-number","focusout",(t=>this.handleCardNumberValidation(t))),a.Utils.addEvent("#card-number","input",(e=>this.convertCardNumber(e,t))),a.Utils.addEvent("#card-cardholder","focusout",(t=>this.handleCardholderNameValidation(t))),a.Utils.addEvent("#card-cardholder","input",(t=>{this.handleTextValidation(t),this.convertCardholderName(t)})),a.Utils.addEvent("#card-exp-month","focusout",(t=>this.handleCardExpMonthValidation(t))),a.Utils.addEvent("#card-exp-month","input",(t=>this.handleNumberValidation(t))),a.Utils.addEvent("#card-exp-year","focusout",(t=>this.handleCardExpYearValidation(t))),a.Utils.addEvent("#card-exp-year","input",(t=>this.handleNumberValidation(t))),a.Utils.addEvent("#card-cvc","focusout",(t=>this.handleCardCvcValidation(t))),a.Utils.addEvent("#card-cvc","input",(t=>this.handleNumberValidation(t)))}addSubmitHandler(){const t=document.querySelector("#order-form");null==t||t.addEventListener("submit",(t=>{t.preventDefault();document.querySelectorAll(".error").length?this.addErrorPopup():(this.addOrderPopup(),setTimeout((()=>{this.modal.removeModal(),this.controller.resetCart(),this.controller.route(this.model.route.origin)}),2e3))}))}addErrorPopup(){const t=a.Utils.create("error-popup","div");t.innerHTML="Пожалуйста, проверьте правильность введенных данных и повторите попытку.";(new n.PopupWindow).buildPopup(t)}addOrderPopup(){const t=a.Utils.create("order-popup","div");t.innerHTML="Заказ успешно оформлен! Спасибо за покупку!";(new n.PopupWindow).buildPopup(t)}handleTextValidation(t){const e=t.target;e.value=e.value.replace(/[^A-Za-zА-Яа-я\s]/g,"")}handleNumberValidation(t){const e=/\D/g,r=t.target;r.value.length&&(r.value=r.value.replace(e,""))}convertPhoneNumber(t){const e=t.target;let r=e.value;if(e.value.length){r=e.value.replace(/[-+\s.( )]/g,"");const t=r.match(/(\d?)(\d{0,3})(\d{0,3})(\d{0,2})(\d{0,2})/);t[3]?e.value="+"+t[1]+" ("+t[2]+") "+t[3]+(t[4]?"-"+t[4]:"")+(t[5]?"-"+t[5]:""):e.value="+"+t[1]+(t[2]?t[2]:"")}}convertCardNumber(t,e){const r=t.target;switch(r.value.length&&(r.value=r.value.replace(/\D/g,"")),r.value.length>=4&&(r.value=r.value.match(/.{1,4}/g).join(" ")),e.className=`${s.Card.DEFAULT}`,r.value[0]){case"3":e.classList.add(`${s.Card.AMERICAN_EXPRESS}`);break;case"4":e.classList.add(`${s.Card.VISA}`);break;case"5":e.classList.add(`${s.Card.MASTERCARD}`);break;default:e.classList.add(`${s.Card.DEFAULT}`)}}convertCardholderName(t){const e=t.target;e.value.length&&(e.value=e.value.toUpperCase())}handleFullNameValidation(t){const e=t.target;this.removeErrorMessage(e),/^[А-Яа-я]{3,} [А-Яа-я]{3,}/.test(e.value)?this.addCorrectMessage(e):this.addErrorMessage(e,"Два слова, каждое не менее 3 букв (русская раскладка)")}handleEmailValidation(t){const e=t.target;this.removeErrorMessage(e),/^[\w-]+@([\w-]+\.)+[\w-]{2,4}$/.test(e.value)?this.addCorrectMessage(e):this.addErrorMessage(e,"Попробуйте еще раз")}handlePhoneValidation(t){const e=t.target;this.removeErrorMessage(e),/^(\+(\d{0,3})) (\((\d{0,3})\)) (\d{0,3})-(\d{0,2})-(\d{0,2})/gm.test(e.value)?this.addCorrectMessage(e):this.addErrorMessage(e,"Попробуйте еще раз")}handleAddressValidation(t){const e=t.target;this.removeErrorMessage(e),/^[А-Яа-я.-]{5,} [А-Яа-я]{5,} [А-Яа-я]{5,}/.test(e.value)?this.addCorrectMessage(e):this.addErrorMessage(e,"Три слова, каждое не менее 5 букв (русская раскладка)")}handleCardNumberValidation(t){const e=t.target;this.removeErrorMessage(e),/(\d{4}) (\d{4}) (\d{4}) (\d{4})/.test(e.value)?this.addCorrectMessage(e):this.addErrorMessage(e,"16 цифр")}handleCardholderNameValidation(t){const e=t.target;this.removeErrorMessage(e),/([A-Z]+) ([A-Z]+)/.test(e.value)?this.addCorrectMessage(e):this.addErrorMessage(e,"Как указано на карте")}handleCardExpMonthValidation(t){const e=t.target;this.removeCardErrorMessage(e),/(0[1-9]|1[0-2])/.test(e.value)||this.addCardErrorMessage(e)}handleCardExpYearValidation(t){const e=t.target;this.removeCardErrorMessage(e),/(2[2-9]|3[0-9]|4[0-9]|5[0-9]|6[0-9]|7[0-9]|8[0-9]|9[0-9])/.test(e.value)||this.addCardErrorMessage(e)}handleCardCvcValidation(t){const e=t.target;this.removeCardErrorMessage(e),/[0-9]{3}/.test(e.value)||this.addCardErrorMessage(e)}addErrorMessage(t,e){var r;t.style.borderColor="red";const o=a.Utils.create("error","span");o.style.color="red",o.style.paddingLeft="5px",o.style.fontSize="1.2rem",o.innerHTML=e,null===(r=t.previousElementSibling)||void 0===r||r.append(o)}removeErrorMessage(t){var e;const r=null===(e=t.previousElementSibling)||void 0===e?void 0:e.querySelector(".error");null==r||r.remove()}addCorrectMessage(t){t.style.borderColor="green"}addCardErrorMessage(t){t.classList.add("error"),t.style.color="red"}removeCardErrorMessage(t){t.classList.remove("error"),t.style.color=""}}},104:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.View=void 0;const o=r(788),a=r(102),s=r(950),n=r(277),i=r(669),l=r(112);e.View=class{constructor(t,e){this.controller=t,this.model=e,this.root=o.Utils.id("#root"),this.addListeners(),this.renderHeader(),this.renderContent(),this.renderFooter(),this.initBurgerMenu();const r=o.Utils.id(".main__wrapper"),a=(t,e,r)=>this.updateCart(t,e,r);this.productView=new s.ProductView(this.controller,this.model,r,a),this.mainView=new n.MainView(this.controller,this.model,r,a),this.cartView=new i.CartView(this.controller,this.model,r,a),this.checkRestoreRoute(),this.addHandlers()}checkRestoreRoute(){const t=localStorage.getItem("restore");if(t)return localStorage.removeItem("restore"),this.controller.route(t),void(t.indexOf("/cart")>0&&(this.model.initState(),this.cartView.render()));this.renderRoute()}addHandlers(){for(const t of o.Utils.id(".nav__link"))t.addEventListener("click",(e=>{this.controller.route(t.href,e)}))}addListeners(){window.addEventListener("popstate",(()=>{this.controller.updateRoute(window.location.href)})),this.model.on("route",(()=>{this.renderRoute()}))}renderRoute(){const t=this.model.route,[,e,r]=t.path;switch(e){case"":case a.Routing.MAIN:this.mainView.render();break;case a.Routing.CART:this.cartView.render();break;case a.Routing.PRODUCTS:this.productView.render(r)}}updateCart(t,e,r){const a=o.Utils.id(".cart__total-value"),s=o.Utils.id(".cart__total-price");a.html(t?t.toString():"").parentElement.parentElement.setAttribute("style",t?"":"display: none;");const n=e===r?`<b>${e.toString()}₽</b>`:`<span>${e.toString()}₽</span><b>${r.toString()}₽</b>`;s.html(e?n:"")}renderHeader(){const t=o.Utils.create("header","header");t.innerHTML=`\n            <div class="wrapper header__wrapper">\n                <a href="/" class="header__logo logo nav__link"><img src="${l}" alt="Hobbies Art Logo"></a>\n                            \n                <nav class="header__nav nav">\n                    <ul class="nav__list">\n                        <li class="nav__item main-link"><a href="/" class="nav__link">Главная</a></li>\n                        <li class="nav__item cart">\n                            <a href="/cart" class="nav__link cart__link">\n                                <div class="cart__total-price"></div>\n                                <div class="cart__wrapper">\n                                    <div class="cart__content">\n                                        <span class="icon icon--cart"></span>\n                                        <p class="cart__text">Корзина</p>\n                                        <div class="cart__total">\n                                            <div class="icon-circle icon-circle--sec-color">\n                                                <span class="cart__total-value"></span>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </a>\n                        </li>\n                    </ul>\n                    <div class="header__close-button close-button">\n                        <span class="icon icon--close"></span>\n                    </div>\n                </nav>\n                \n                <div class="header__button burger-button">\n                  <span class="icon icon--burger"></span>\n                </div>\n            </div>\n    `,this.root.append(t)}renderContent(){const t=o.Utils.create("main","main"),e=o.Utils.create("main__wrapper wrapper","div");t.append(e),this.root.append(t)}renderFooter(){const t=o.Utils.create("footer","footer");t.innerHTML='\n            <footer class="footer">\n            <div class="footer__wrapper wrapper">\n                <div class="footer__gh gh">\n                    <a class="gh__link" href="https://github.com/Elijah-I"><span class="icon icon--gh-face"></a>\n                    <a class="gh__link" href="https://github.com/fogarea"><span class="icon icon--gh"></a>\n                </div>\n                <div class="footer__text">\n                  <span>fogarea / elijah</span>\n                  <span>2022</span>\n                </div>\n                <div class="footer__rss rss">\n                    <a class="rss__link" href="https://rs.school/js/"><span class="icon icon--rss"></a>\n                </div>\n            </div>\n        </footer>\n    ',this.root.append(t)}initBurgerMenu(){const t=document.querySelector(".nav"),e=o.Utils.create("overlay","div"),r=()=>{document.body.removeChild(e),null==t||t.classList.remove("nav--show"),document.body.classList.remove("body--scroll__disable")};o.Utils.addEvent(".burger-button","click",(()=>{null==t||t.classList.add("nav--show"),document.body.classList.add("body--scroll__disable"),document.body.append(e);for(const t of o.Utils.id(".nav__item"))o.Utils.addEvent(t,"click",(()=>r()))})),o.Utils.addEvent(".nav","click",(t=>{const e=t.target;(e.classList.contains("nav")||e.classList.contains("icon--close"))&&r()}))}}},359:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FilterView=void 0;const o=r(788),a=r(690);e.FilterView=class{constructor(t,e){this.controller=t,this.model=e}render(t){const e=o.Utils.create("filter","section");t.innerHTML="",t.append(e),this.fill()}fill(){this.fillFilters(),this.insertSliders(),this.addHandlers()}fillFilters(){let t="";this.model.categories.length&&(t+=this.addCategories()),this.model.brands.length&&(t+=this.addBrands()),t+=this.addFilters(),o.Utils.id(".filter").html(`<div class="filter__wrapper">${t}</div>`)}addFilters(){return`\n      <div class="filter__close-button close-button">\n        <span class="icon icon--close"></span>\n      </div>\n      <div class="filter__price price-filter ">\n        <div class="price-filter__wrapper">\n            <h3 class="price-filter__title title">Цена</h3>\n        </div>\n      </div>\n\n      <div class="filter__stock stock-filter">\n        <div class="stock-filter__wrapper">\n            <h3 class="stock-filter__title title">В наличии</h3>\n        </div>\n      </div>\n\n      <div class="filter__total-products total-products">\n        <span class="total-products__text">Найдено товаров:</span>\n        <span class="total-products__value" id="total-products">${this.model.amount.total}</span>\n      </div>\n      \n      <div class="filter__buttons">\n        <button class="button button--rounded button--bordered" id="button-reset">Очистить</button>\n        <button class="button button--rounded button--bordered" id="button-copy">Скопировать</button>\n      </div>\n    `}addCategories(){let t='\n      <div class="filter__categories categories-filter">\n        <h3 class="categories-filter__title title">Категории</h3>\n        <ul class="categories-filter__list filter-list">\n    ';return this.model.categories.forEach((({id:e,checked:r,name:o})=>{t+=`\n          <li class="categories-filter__item filter-list__item">\n            <input \n              type="checkbox" \n              class="filter-list__item-check filter__categorie-item" \n              data-id="${e}"\n              id="categories-${e}"\n              ${r?"checked":""}\n            >\n            <label \n              class="filter-list__item-label" \n              for="categories-${e}">\n              <span class="filter-list__item-name">${o}</span>\n              <span class="filter-list__item-amount">(${this.model.amount.categories[e]||"0"})</span>\n            </label>\n          </li>`})),t+="\n        </ul>\n      </div>\n    ",t}addBrands(){let t='\n      <div class="filter__brands brands-filter">\n        <h3 class="brands-filter__title title">Бренды</h3>\n        <ul class="brands-filter__list filter-list">\n    ';return this.model.brands.forEach((({id:e,checked:r,name:o})=>{t+=`\n          <li class="brands-filter__item filter-list__item">\n            <input \n              type="checkbox" \n              class="filter-list__item-check filter__brand-item" \n              data-id="${e}"\n              id="brands-${e}" \n              ${r?"checked":""}\n            >\n            <label \n              class="filter-list__item-label" \n              for="brands-${e}">\n              <span class="filter-list__item-name">${o}</span>\n              <span class="filter-list__item-amount">(${this.model.amount.brands[e]||"0"})</span>\n            </label>\n          </li>`})),t+="\n        </ul>\n      </div>\n    ",t}insertSliders(){const t=o.Utils.id(".price-filter__wrapper");t.html('<h3 class="price-filter__title title">Цена</h3>');const e=new a.RangeSlider(this.model,this.controller,"price");t.append(e.buildRangeSlider());const r=o.Utils.id(".stock-filter__wrapper");r.html('<h3 class="price-filter__title title">В наличии</h3>');const s=new a.RangeSlider(this.model,this.controller,"stock");r.append(s.buildRangeSlider())}addHandlers(){for(const t of o.Utils.id(".filter__categorie-item"))o.Utils.addEvent(t,"click",(()=>this.controller.changeFilterCategory(t.checked,+t.dataset.id)));for(const t of o.Utils.id(".filter__brand-item"))o.Utils.addEvent(t,"click",(()=>this.controller.changeFilterBrand(t.checked,+t.dataset.id)));o.Utils.addEvent("#button-reset","click",(()=>{this.controller.resetFilter(),this.fill()})),o.Utils.addEvent("#button-copy","click",(t=>{const e=t.target;e.classList.add("button--copy-clicked");const r=e.innerText;e.innerText="Ссылка скопирована!",e.addEventListener("transitionend",(function(){this.innerText=r,this.classList.remove("button--copy-clicked")})),navigator.clipboard.writeText(window.location.href)}))}}},92:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GridLayoutView=void 0;const o=r(788);e.GridLayoutView=class{constructor(t,e){this.controller=t,this.model=e}render(t){const e=o.Utils.create("head-controls__layouts layouts","div");t.append(e),this.fill(e)}fill(t){this.fillRadioInputs(t),this.addHandlers(t)}fillRadioInputs(t){const e=this.generateRadioInput("rows"),r=this.generateRadioInput("columns");t.append(e,r)}generateRadioInput(t){const e=o.Utils.create("","label");e.setAttribute("for",`${t}`);const r=o.Utils.create("layouts__radio","input");r.type="radio",r.name="layout",r.id=`${t}`,this.model.layout===t&&(r.checked=!0);const a=o.Utils.create(`icon icon--${t}`,"span");return e.append(r,a),e}addHandlers(t){t.addEventListener("click",(t=>{const e=t.target;if("INPUT"!==e.tagName)return;const r=document.querySelector(".products__wrapper");null==r||r.classList.replace(`layout-${this.model.layout}`,`layout-${e.id}`),this.controller.changeLayout(e.id)}))}}},307:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.HeadControlsView=void 0;const o=r(788),a=r(92),s=r(559),n=r(887);e.HeadControlsView=class{constructor(t,e){this.controller=t,this.model=e,this.gridLayout=new a.GridLayoutView(this.controller,this.model),this.sortBy=new n.SortByView(this.controller,this.model),this.search=new s.SearchView(this.controller,this.model)}render(t){t.innerHTML="";const e=o.Utils.create("head-controls__wrapper","div");this.gridLayout.render(e),this.search.render(e),this.sortBy.render(e),this.fillFilterButton(e),t.append(e)}fillFilterButton(t){const e=o.Utils.create("button button--bordered filter__button","button");e.innerText="Фильтры",t.append(e),this.addFilterHandler(e)}addFilterHandler(t){null==t||t.addEventListener("click",(t=>{const e=document.querySelector(".filter"),r=t.target;null==e||e.classList.add("filter--show"),console.log(r),o.Utils.addEvent(".filter","click",(t=>{t.target.classList.contains("icon--close")&&(null==e||e.classList.remove("filter--show"))}))}))}}},277:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MainView=void 0;const o=r(788),a=r(359),s=r(358),n=r(307);e.MainView=class{constructor(t,e,r,i){this.controller=t,this.model=e,this.root=r,this.onCartUpdate=i,this.filters=new a.FilterView(this.controller,this.model),this.headControls=new n.HeadControlsView(this.controller,this.model),this.productsList=new s.ProductsView(this.controller,this.model),this.productsRoot=o.Utils.create("products","section"),this.headControlsRoot=o.Utils.create("head-controls","section"),this.rightSideWrapper=o.Utils.create("main__right-side","div"),this.leftSideWrapper=o.Utils.create("main__left-side","div"),this.addListeners()}addListeners(){const t=()=>{this.productsList.render(this.model.products,this.model.layout,this.productsRoot),this.filters.render(this.leftSideWrapper)},e=()=>{const t=this.model.cartIds;this.productsList.applyCart(t),this.onCartUpdate(this.model.cartStockTotal,this.model.totalPrice,this.model.totalDiscounted)};this.model.on("filter.update",t),this.model.on("controls.update",t),this.model.on("search.update",t),this.model.on("cart.update",e),window.addEventListener("storage",(()=>{this.model.initState(),this.controller.applyCart(),e()}))}render(){this.root.html(""),this.headControls.render(this.headControlsRoot),this.rightSideWrapper.append(this.headControlsRoot,this.productsRoot),this.root.append(this.leftSideWrapper,this.rightSideWrapper),this.controller.applyFilters(),this.controller.applyControls(),this.controller.applyCart()}}},358:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ProductsView=void 0;const o=r(788),a=r(898);e.ProductsView=class{constructor(t,e){this.controller=t,this.model=e}render(t,e,r){let s=0;r.innerHTML="",a.headStyle.clearHeadStyle();const n=a.headStyle.getHeadStyle(),i=o.Utils.create(`products__wrapper layout-${e}`,"div");t.forEach((({id:t,title:e,price:r,discountPercentage:o,stockUsed:a,brand:l,rating:c,stock:d,category:u,thumbnail:p,show:h,cart:m})=>{let g="";const f=m?"Удалить из корзины":"Добавить в корзину";if(h){const n=!o;g+=`\n          <a href="/product/${t}" class="${"products__item product-item"+(m?" product-item--carted":"")}" data-id=${t} id="product-${t}">\n            <div class="product-item__img">\n                <img src="${p}" alt="Product Item">\n            </div>\n            <div class="product-item__content">\n                <h4 class="product-item__title title">${e}</h4>\n                \n                <div class="product-item__info">\n                    <div class="product-item__desc">\n                        <span class="product-item__category">\n                            ${u.name}\n                        </span>\n                        <span class="product-item__brand">\n                            Бренд: ${l.name}\n                        </span>\n                        <span class="product-item__stock">\n                            В наличии: <span class="info-list__value">${d-a}</span>\n                        </span>\n                    </div>\n                    <div class="product-item__price">\n                        <span class="product-item__price-default${n?" product-item__price-only":""}">${r}₽</span>\n                        <span class="product-item__price-discount${n?" product-item__price-only":""}">${(r-r/100*o).toFixed(2)}₽</span>\n                    </div>\n                </div>\n                <div class="product-item__rating-buy">\n                    <span class="product-item__rating" id="rating-${t}">\n                        ${c}\n                    </span>\n                    <div class="product-item__button">\n                      <button data-id=${t} class="button button--rounded button--bordered button__add">${f}</button>\n                    </div>\n                </div>  \n            </div>\n          </a>\n          `,s++}i.innerHTML+=g,n.innerHTML+=`#rating-${t}:before {\n                content: '★★★★★';\n                letter-spacing: 3px;\n                background: linear-gradient(90deg, #fc0 ${c/5*100}%, #fff ${c/5*100}%);\n                -webkit-background-clip: text;\n                -webkit-text-fill-color: transparent;}\n`})),0===s&&(i.innerHTML='<div class="products__empty">Товары по вашему запросу не найдены. Пожалуйста, попробуйте еще раз</div>'),r.append(i),this.addHandlers()}applyCart(t){const e=o.Utils.ids(".product-item");if(e)for(const t of e)t.classList.remove("product-item--carted"),o.Utils.id(`#product-${t.dataset.id} .button__add`).html("Добавить в корзину"),o.Utils.id(`#product-${t.dataset.id} .info-list__value`).html(this.model.totalStock(+t.dataset.id).toString());for(const e of t){const t=o.Utils.id(`#product-${e}`);null!==t&&(t.class("product-item--carted"),o.Utils.id(`#product-${e} .button__add`).html("Удалить из корзины"))}}addHandlers(){const t=o.Utils.ids(".products__item");if(t)for(const e of t)e.addEventListener("click",(t=>{if(t.target instanceof HTMLElement&&t.target.closest(".button__add"))return t.preventDefault(),this.controller.toggleCart(+e.dataset.id),!1;if(t.target instanceof HTMLElement&&t.target.closest(".products__item")){const e=t.target.closest(".products__item");return this.controller.route(e.href,t),!1}}))}}},559:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SearchView=void 0;const o=r(788);e.SearchView=class{constructor(t,e){this.controller=t,this.model=e}render(t){const e=o.Utils.create("head-controls__search search","div"),r=o.Utils.create("search__input","input");r.placeholder="Найти товар",r.name="search",r.value=this.model.search,e.append(r),t.append(e),this.addHandler(r)}addHandler(t){t.addEventListener("input",(t=>{const e=t.target;this.controller.addSearchPattern(e.value)}))}}},887:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SortByView=void 0;const o=r(788),a=r(743);e.SortByView=class{constructor(t,e){this.controller=t,this.model=e}render(t){const e=o.Utils.create("head-controls__sort-by sort-by","div"),r=o.Utils.create("sort-by__label","label");r.innerText="Отсортировать",r.setAttribute("for","sort-by"),e.append(r),this.fill(e),t.append(e)}fill(t){const e=o.Utils.create("sort-by__select","select");e.name="sort-by",e.id="sort-by",this.fillSelect(t,e),this.addHandler(e)}fillSelect(t,e){Object.values(a.SortSettings).forEach((t=>e.append(this.generateOption(t)))),t.append(e)}generateOption(t){const e=o.Utils.create("","option");return e.value=`${t}`,e.innerText=`${t.replaceAll("-"," ")}`,this.model.sort===t&&(e.selected=!0),e}addHandler(t){t.addEventListener("change",(t=>{const e=t.target;this.controller.changeSort(e.value)}))}}},950:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ProductView=void 0;const o=r(788),a=r(898),s=r(926),n=r(758);e.ProductView=class{constructor(t,e,r,a){this.controller=t,this.model=e,this.root=r,this.onCartUpdate=a,this.productRoot=o.Utils.create("product","section"),this.breadcrumbsNav=o.Utils.create("breadcrumbs-nav","div"),this.productWrapper=o.Utils.create("product__wrapper","div"),this.modal=new n.ModalWindow,this.productId=-1}render(t){this.root.html("");for(let e=0;e<this.model.products.length;e++)if(this.model.products[e].id===parseInt(t)){this.productId=+t,this.fill(this.model.products[e]);break}this.controller.applyCart()}fill(t){this.fillBreadcrumbsNav(t),this.fillProduct(t),this.productRoot.append(this.breadcrumbsNav,this.productWrapper),this.root.append(this.productRoot),this.addHandlers(),this.addListeners()}fillBreadcrumbsNav({category:t,title:e}){this.breadcrumbsNav.innerHTML=`\n      <ul class="breadcrumbs-nav__list">\n        <li class="breadcrumbs-nav__item"><a class="bread__link" href="/">Главная</a></li>\n        <li class="breadcrumbs-nav__item"><a class="bread__link" href="/?${s.SearchParams.CATEGORY}=${t.id}">${t.name}</a></li>\n        <li class="breadcrumbs-nav__item"><a href="#" onClick="return(false);">${e}</a></li>\n      </ul>`}fillProduct(t){let e='<div class="product__pictures pictures">';t.images.length&&(e+=this.addImages(t.images)),e+="</div>",t&&(e+=this.addProduct(t)),this.productWrapper.innerHTML=e}addImages(t){let e=`<div class="pictures__main-pic">\n                        <img src="${t[0]}" alt="Product image">                    \n                    </div>`;return e+='<ul class="pictures__list">',t.forEach((t=>{e+=`<li class="pictures__item">\n                      <img src="${t}" alt="Product image">\n                      <span class="icon icon--zoom" data-id="zoom"></span>\n                   </li>`})),e+="</ul>",e}addProduct(t){a.headStyle.clearHeadStyle();a.headStyle.getHeadStyle().innerHTML+=`\n      #rating-${t.id}:before {\n        content: '★★★★★';\n        letter-spacing: 3px;\n        background: linear-gradient(90deg, #fc0 ${t.rating/5*100}%, #fff ${t.rating/5*100}%);\n        -webkit-background-clip: text;\n        -webkit-text-fill-color: transparent;}\n`;const e=this.model.inCart(t.id),r=e?"Удалить из корзины":"Добавить в корзину",o="button button--rounded button--bordered button__add-product"+(e?" button--carted":""),s=!t.discountPercentage;return`\n      <div class="product__content">\n        <h2 class="product__title title">${t.title}</h2>\n        <div class="product__desc">\n            <h4 class="product__desc-title title">Описание товара</h4>\n            <span class="product__desc-content">${t.description}</span>                  \n        </div>\n\n        <div class="product__info">\n            <h4 class="product__info-title title">Характеристики</h4>\n            <ul class="product__info-list info-list">\n                <li class="info-list__item">\n                    <span class="info-list__name">Категория</span>\n                    <span class="info-list__value">${t.category.name}</span>\n                </li>\n                <li class="info-list__item">\n                    <span class="info-list__name">Бренд</span>\n                    <span class="info-list__value">${t.brand.name}</span>\n                </li>\n                <li class="info-list__item">\n                    <span class="info-list__name">В наличии</span>\n                    <span class="info-list__value" id="info-list-product-value">${t.stock-t.stockUsed}</span>\n                </li>\n            </ul>\n        </div>\n                    \n        <div class="product__price">\n            <span class="product__price-default${s?" product__price-only":""}">${t.price}₽</span>\n            <span class="product__price-discount${s?" product__price-only":""}">${(t.price-t.price/100*t.discountPercentage).toFixed(2)}₽</span>\n        </div>\n\n        <div class="product__rating">\n            <span class="product__rating-stars" id="rating-${t.id}">${t.rating}</span>\n        </div>\n\n        <div class="product__buttons">\n            <button class="${o}" data-id="${t.id}">${r}</button>\n            <a href="/cart" class="button button--rounded button--bordered button__buy-product" data-id="${t.id}">Быстрая покупка</a>\n        </div>\n      </div>`}addHandlers(){o.Utils.addEvent(".pictures__list","click",(t=>{const e=t.target;if("IMG"===e.tagName){const t=o.Utils.id(".pictures__main-pic");t.innerHTML="",t.append(e.cloneNode(!0))}if("SPAN"===e.tagName){const t=e.previousElementSibling;this.appendImgZoomModal(t)}}));for(const t of o.Utils.id(".bread__link"))t.addEventListener("click",(e=>{this.controller.route(t.href,e)}));const t=o.Utils.id(".button__add-product"),e=o.Utils.id(".button__buy-product");null!==t&&o.Utils.addEvent(t,"click",(()=>(this.controller.toggleCart(+t.dataset.id),!1))),null!==e&&e.addEventListener("click",(t=>(this.controller.quickBuy(t,+e.dataset.id,e.href),!1)))}addListeners(){const t=()=>{const t=this.model.cartIds;this.applyCart(t),this.onCartUpdate(this.model.cartStockTotal,this.model.totalPrice,this.model.totalDiscounted)};this.model.on("cart.update",t),window.addEventListener("storage",(()=>{this.model.initState(),this.controller.applyCart(),t()}))}applyCart(t){const e=t.includes(this.productId),r=o.Utils.id(".button__add-product"),a=o.Utils.id("#info-list-product-value");null!==r&&r.class("button--carted",!e).html(e?"Удалить из корзины":"Добавить в корзину"),null!==a&&a.html(this.model.totalStock(this.productId).toString())}appendImgZoomModal(t){const e=o.Utils.create("modal__img","div");e.id="modal__img";const r=t.cloneNode(!0);r.className="modal__img-origin",r.id="origin-img";const a=o.Utils.create("modal__img-zoom","span");a.id="zoom-img",a.style.backgroundImage=`url('${r.src}')`,a.style.backgroundRepeat="no-repeat";const s=o.Utils.create("modal__img-text","p");s.innerText="Для того, чтобы приблизить изображение, наведите на него",e.append(s,r,a),this.modal.buildModal(e),r.addEventListener("mousemove",(t=>this.handleZoomImage(t,r,a)))}handleZoomImage(t,e,r){const{left:o,top:a}=e.getBoundingClientRect(),s=t.pageX-o-window.pageXOffset,n=t.pageY-a-window.pageYOffset;r.style.left=s-r.offsetWidth/2+"px",r.style.top=n-r.offsetHeight/2+"px";const i=2*s-r.offsetWidth/2,l=2*n-r.offsetHeight/2;r.style.backgroundPosition=`-${i}px -${l}px`}}},112:(t,e,r)=>{t.exports=r.p+"assets/svg/logo.svg"},49:t=>{t.exports=JSON.parse('[{"id":0,"title":"Пряжа \\"Ирис\\"","description":"Нитки Ирис \\"Gamma\\" используются для машинного и ручного вязания ажурного трикотажа, салфеток, воротничков. Нитки Ирис \\"Gamma\\" изготавливаются из египетского хлопка на европейском оборудовании, с использованием качественных европейских красителей. Нитки мерсеризованные, гладкие, равномерной толщины, имеют стойкую окраску.","price":93,"discountPercentage":7,"rating":4.3,"stock":76,"stockUsed":0,"show":true,"cart":false,"brand":{"id":0,"name":"Gamma"},"category":{"id":0,"name":"Вязание"},"thumbnail":"https://raw.githubusercontent.com/fogarea/assets/online-shop/products/0/thumbnail.jpg","images":["https://raw.githubusercontent.com/fogarea/assets/online-shop/products/0/0.jpg","https://raw.githubusercontent.com/fogarea/assets/online-shop/products/0/1.jpg"]},{"id":1,"title":"Пряжа \\"Ирис меланж\\"","description":"Нитки Ирис меланж \\"Gamma\\" используются для машинного и ручного вязания ажурного трикотажа, салфеток, воротничков. Меланжевый Ирис \\"Gamma\\" - это палитра разнообразных цветов с гармоничным переходом оттенков. Секционная окраска нити дает неповторимый эффект при вязании и позволяет сделать готовое изделие уникальным при минимуме усилий. Даже самый простой узор будет выглядеть эффектно и оригинально.","price":104,"discountPercentage":0,"rating":4.8,"stock":58,"stockUsed":0,"show":true,"cart":false,"brand":{"id":0,"name":"Gamma"},"category":{"id":0,"name":"Вязание"},"thumbnail":"https://raw.githubusercontent.com/fogarea/assets/online-shop/products/1/thumbnail.jpg","images":["https://raw.githubusercontent.com/fogarea/assets/online-shop/products/1/0.jpg","https://raw.githubusercontent.com/fogarea/assets/online-shop/products/1/1.jpg"]},{"id":2,"title":"Пряжа \\"Ирис ассорти\\"","description":"Нитки Ассорти Ирис \\"Gamma\\" используются для машинного и ручного вязания ажурного трикотажа, салфеток, воротничков. Ассорти Ирис \\"Gamma\\" - это 10 гармоничных цветовых сочетаний - от нежных пастельных до ярких радужных. Такой набор - отличный выбор для реализации разнообразных творческих идей и может стать прекрасным подарком для любителя рукоделия.","price":925,"discountPercentage":0,"rating":5,"stock":17,"stockUsed":0,"show":true,"cart":false,"brand":{"id":0,"name":"Gamma"},"category":{"id":0,"name":"Вязание"},"thumbnail":"https://raw.githubusercontent.com/fogarea/assets/online-shop/products/2/thumbnail.jpg","images":["https://raw.githubusercontent.com/fogarea/assets/online-shop/products/2/0.jpg","https://raw.githubusercontent.com/fogarea/assets/online-shop/products/2/1.jpg"]},{"id":3,"title":"Шкатулка SBJ-010","description":"\\"Gamma\\" SBJ-010 шкатулка для швейных принадлежностей 31.5х31.5х19см. Квадратная шкатулка с ручкой, основа - дерево, лицевая поверхность крышки - гобелен с красивыми изящными рисунками. Боковая поверхность шкатулки отдекорирована плетеным шнуром, который идеально сочетается с рисунком. Шкатулка имеют пластиковую вставку с 8-ю делениями.","price":3558,"discountPercentage":0,"rating":5,"stock":4,"stockUsed":0,"show":true,"cart":false,"brand":{"id":0,"name":"Gamma"},"category":{"id":1,"name":"Шкатулки"},"thumbnail":"https://raw.githubusercontent.com/fogarea/assets/online-shop/products/3/thumbnail.jpg","images":["https://raw.githubusercontent.com/fogarea/assets/online-shop/products/3/0.jpg","https://raw.githubusercontent.com/fogarea/assets/online-shop/products/3/1.jpg"]},{"id":4,"title":"Шкатулка ШКА-10","description":"\\"Gamma\\" ШКА-10 шкатулка 34 х 26 х 17 см. Шкатулка прямоугольной формы с ручкой, основа - дерево, лицевая поверхность из текстильных материалов. Шкатулка имеет в комплекте мини-органайзер для ниток из фанеры с логотипом \\"Gamma\\", подвешен к ручке шкатулки.","price":2165,"discountPercentage":0,"rating":4.8,"stock":8,"stockUsed":0,"show":true,"cart":false,"brand":{"id":0,"name":"Gamma"},"category":{"id":1,"name":"Шкатулки"},"thumbnail":"https://raw.githubusercontent.com/fogarea/assets/online-shop/products/4/thumbnail.jpg","images":["https://raw.githubusercontent.com/fogarea/assets/online-shop/products/4/0.jpg","https://raw.githubusercontent.com/fogarea/assets/online-shop/products/4/1.jpg","https://raw.githubusercontent.com/fogarea/assets/online-shop/products/4/2.jpg"]},{"id":5,"title":"Шкатулка ШКА-01","description":"\\"Gamma\\" ШКА-01 шкатулка 23.5х23.5х14.5см. Шкатулка квадратной формы с ручкой, основа - дерево, лицевая поверхность из текстильных материалов. Шкатулка имеет в комплекте мини-органайзер для ниток из фанеры с логотипом \\"Gamma\\", подвешен к ручке шкатулки. Предназначена для хранения мелочей.","price":1909,"discountPercentage":3.7,"rating":5,"stock":3,"stockUsed":0,"show":true,"cart":false,"brand":{"id":0,"name":"Gamma"},"category":{"id":1,"name":"Шкатулки"},"thumbnail":"https://raw.githubusercontent.com/fogarea/assets/online-shop/products/5/thumbnail.jpg","images":["https://raw.githubusercontent.com/fogarea/assets/online-shop/products/5/0.jpg","https://raw.githubusercontent.com/fogarea/assets/online-shop/products/5/1.jpg"]},{"id":6,"title":"Бусина пластик","description":"Бусина под жемчуг пластик \\"Zlatka\\" PB  Диаметр 4 мм. Используются для изготовления бус, браслетов, колье и др. бижутерии, аксессуаров, для декоративного украшения одежды и творческих поделок. При производстве бусин №23 под золото и №24 под серебро окрашивание происходит вручную. Между окрашиваемыми бусинами размещают бусины меньшего размера и из пульверизатора распыляют на них краску, при этом бусины приобретают матовый эффект.","price":47,"discountPercentage":0,"rating":4.1,"stock":153,"stockUsed":0,"show":true,"cart":false,"brand":{"id":1,"name":"Zlatka"},"category":{"id":2,"name":"Плетение из бисера"},"thumbnail":"https://raw.githubusercontent.com/fogarea/assets/online-shop/products/6/thumbnail.jpg","images":["https://raw.githubusercontent.com/fogarea/assets/online-shop/products/6/0.jpg","https://raw.githubusercontent.com/fogarea/assets/online-shop/products/6/1.jpg"]},{"id":7,"title":"Бусина пластик","description":"Бусина пластик \\"Hobbius\\" ABFC набор для рукоделия «Алфавитный коктейль» от ТМ Hobbius  Размер:6 мм Универсальный состав. Каждый набор содержит по 100 гр. бусин с нанесёнными русскими буквами. Широкое отверстие позволяет применять их в самых разных целях. Такие бусины можно использовать в поздравительных целях – «подписать» скрап-открытку, сделать праздничную гирлянду, подарок и т.д.","price":517,"discountPercentage":4,"rating":5,"stock":99,"stockUsed":0,"show":true,"cart":false,"brand":{"id":2,"name":"Hobbius"},"category":{"id":2,"name":"Плетение из бисера"},"thumbnail":"https://raw.githubusercontent.com/fogarea/assets/online-shop/products/7/thumbnail.jpg","images":["https://raw.githubusercontent.com/fogarea/assets/online-shop/products/7/0.jpg","https://raw.githubusercontent.com/fogarea/assets/online-shop/products/7/1.jpg"]},{"id":8,"title":"Бусина MIX пластик","description":"Бусина пластик \\"Zlatka\\" MIX PBM ассорти под металл, с эффектом под старину. Состаривание – популярная сегодня техника декора, придание предметам антикварного вида. Используются для изготовления бус, браслетов, колье и др. бижутерии, декоративного украшения одежды, аксессуаров и т.д.","price":202,"discountPercentage":0,"rating":4.7,"stock":136,"stockUsed":0,"show":true,"cart":false,"brand":{"id":1,"name":"Zlatka"},"category":{"id":2,"name":"Плетение из бисера"},"thumbnail":"https://raw.githubusercontent.com/fogarea/assets/online-shop/products/8/thumbnail.jpg","images":["https://raw.githubusercontent.com/fogarea/assets/online-shop/products/8/0.jpg","https://raw.githubusercontent.com/fogarea/assets/online-shop/products/8/1.jpg"]},{"id":9,"title":"Молд \\"Fiorico\\" \\"Роза лист\\"","description":"Используется для создания отпечатка фактуры на изделии при лепке и работе с фоамираном. Возможна небольшая разница в оттенках молдов. 7.6x5.1см","price":185,"discountPercentage":0,"rating":5,"stock":315,"stockUsed":0,"show":true,"cart":false,"brand":{"id":3,"name":"Blumentag"},"category":{"id":3,"name":"Хобби и творчество"},"thumbnail":"https://raw.githubusercontent.com/fogarea/assets/online-shop/products/9/thumbnail.jpg","images":["https://raw.githubusercontent.com/fogarea/assets/online-shop/products/9/0.jpg","https://raw.githubusercontent.com/fogarea/assets/online-shop/products/9/1.jpg"]},{"id":10,"title":"Молд \\"Fiorico\\" \\"Лепесток розы\\"","description":"Используется для создания отпечатка фактуры на изделии при лепке и работе с фоамираном. Возможна небольшая разница в оттенках молдов. 6.4x6.2см","price":185,"discountPercentage":5.5,"rating":4.5,"stock":227,"stockUsed":0,"show":true,"cart":false,"brand":{"id":3,"name":"Blumentag"},"category":{"id":3,"name":"Хобби и творчество"},"thumbnail":"https://raw.githubusercontent.com/fogarea/assets/online-shop/products/10/thumbnail.jpg","images":["https://raw.githubusercontent.com/fogarea/assets/online-shop/products/10/0.jpg","https://raw.githubusercontent.com/fogarea/assets/online-shop/products/10/1.jpg"]},{"id":11,"title":"Молд \\"Fiorico\\" \\"Одуванчик лист\\"","description":"Используется для создания отпечатка фактуры на изделии при лепке и работе с фоамираном. Возможна небольшая разница в оттенках молдов. 6.4x6.2см","price":158,"discountPercentage":8.7,"rating":4.9,"stock":169,"stockUsed":0,"show":true,"cart":false,"brand":{"id":3,"name":"Blumentag"},"category":{"id":3,"name":"Хобби и творчество"},"thumbnail":"https://raw.githubusercontent.com/fogarea/assets/online-shop/products/11/thumbnail.jpg","images":["https://raw.githubusercontent.com/fogarea/assets/online-shop/products/11/0.jpg","https://raw.githubusercontent.com/fogarea/assets/online-shop/products/11/1.jpg"]},{"id":12,"title":"Декоративные элементы \\"веточки\\"","description":"Декоративные элементы \\"Blumentag\\" GPT-06 предназначены для создания миниатюрных садовых композиций в стиле \\"Гарденинг\\". Также можно использовать для декора флористических композиций, оформления подарков и т.п. 8х7см","price":134,"discountPercentage":0,"rating":5,"stock":336,"stockUsed":0,"show":true,"cart":false,"brand":{"id":3,"name":"Blumentag"},"category":{"id":4,"name":"Флористика"},"thumbnail":"https://raw.githubusercontent.com/fogarea/assets/online-shop/products/12/thumbnail.jpg","images":["https://raw.githubusercontent.com/fogarea/assets/online-shop/products/12/0.jpg","https://raw.githubusercontent.com/fogarea/assets/online-shop/products/12/1.jpg","https://raw.githubusercontent.com/fogarea/assets/online-shop/products/12/2.jpg"]},{"id":13,"title":"Декоративные элементы \\"цветные веточки\\"","description":"Декоративные элементы \\"Blumentag\\" GPT-06 предназначены для создания миниатюрных садовых композиций в стиле \\"Гарденинг\\". Также можно использовать для декора флористических композиций, оформления подарков и т.п. 8х7см","price":134,"discountPercentage":3.3,"rating":5,"stock":478,"stockUsed":0,"show":true,"cart":false,"brand":{"id":3,"name":"Blumentag"},"category":{"id":4,"name":"Флористика"},"thumbnail":"https://raw.githubusercontent.com/fogarea/assets/online-shop/products/13/thumbnail.jpg","images":["https://raw.githubusercontent.com/fogarea/assets/online-shop/products/13/0.jpg","https://raw.githubusercontent.com/fogarea/assets/online-shop/products/13/1.jpg","https://raw.githubusercontent.com/fogarea/assets/online-shop/products/13/2.jpg"]},{"id":14,"title":"Бомбочка для ванн аромат Земляника","description":"Бомбочка для ванн поможет восстановить запас энергии и наполнит пространство вокруг восхитительными ароматами, имеет форму сердца.","price":149,"discountPercentage":0,"rating":5,"stock":57,"stockUsed":0,"show":true,"cart":false,"brand":{"id":4,"name":"Lol&Pop"},"category":{"id":5,"name":"Красота и уход"},"thumbnail":"https://raw.githubusercontent.com/fogarea/assets/online-shop/products/14/thumbnail.jpg","images":["https://raw.githubusercontent.com/fogarea/assets/online-shop/products/14/0.jpg","https://raw.githubusercontent.com/fogarea/assets/online-shop/products/14/1.jpg","https://raw.githubusercontent.com/fogarea/assets/online-shop/products/14/2.jpg"]},{"id":15,"title":"Бурлящий шарик для ванны Аромат манго","description":"Бурлящий шар создаст эффект «джакузи» в вашей ванне, поможет восстановить запас энергии и наполнит пространство вокруг восхитительными ароматами.","price":149,"discountPercentage":1.5,"rating":5,"stock":78,"stockUsed":0,"show":true,"cart":false,"brand":{"id":4,"name":"Lol&Pop"},"category":{"id":5,"name":"Красота и уход"},"thumbnail":"https://raw.githubusercontent.com/fogarea/assets/online-shop/products/15/thumbnail.jpg","images":["https://raw.githubusercontent.com/fogarea/assets/online-shop/products/15/0.jpg","https://raw.githubusercontent.com/fogarea/assets/online-shop/products/15/1.jpg","https://raw.githubusercontent.com/fogarea/assets/online-shop/products/15/2.jpg","https://raw.githubusercontent.com/fogarea/assets/online-shop/products/15/3.jpg","https://raw.githubusercontent.com/fogarea/assets/online-shop/products/15/4.jpg"]},{"id":16,"title":"Скраб для тела Мандарин + корица","description":"Арома скраб для тела мандарин&корица Препятствует ожирению и потере упругости контуров тела. Предупреждает образование растяжек. Способствует устранению целлюлита. Снимает напряжение и раздражительность. Прекрасно увлажнят сухую шелушащуюся кожу, разглаживает и омолаживает придавая ей эластичность.","price":229,"discountPercentage":23,"rating":3.9,"stock":331,"stockUsed":0,"show":true,"cart":false,"brand":{"id":4,"name":"Lol&Pop"},"category":{"id":5,"name":"Красота и уход"},"thumbnail":"https://raw.githubusercontent.com/fogarea/assets/online-shop/products/16/thumbnail.jpg","images":["https://raw.githubusercontent.com/fogarea/assets/online-shop/products/16/0.jpg","https://raw.githubusercontent.com/fogarea/assets/online-shop/products/16/1.jpg"]},{"id":17,"title":"Краска пальчиковая с Алоэ Вера","description":"Гелевые пальчиковые краски ArtBerry® с Алоэ Вера специально разработаны для маленьких детей и предназначены для рисования на бумаге и картоне, пальцами и ладошками, а также специальной кисточкой или губкой. Краски легко и равномерно смешиваются между собой, образуя новые оттенки. После высыхания цвета рисунка остаются сочными и яркими, картинка приобретает глянцевый блеск.","price":755,"discountPercentage":0,"rating":5,"stock":174,"stockUsed":0,"show":true,"cart":false,"brand":{"id":5,"name":"Artberry"},"category":{"id":6,"name":"Детское творчество"},"thumbnail":"https://raw.githubusercontent.com/fogarea/assets/online-shop/products/17/thumbnail.jpg","images":["https://raw.githubusercontent.com/fogarea/assets/online-shop/products/17/0.jpg","https://raw.githubusercontent.com/fogarea/assets/online-shop/products/17/1.jpg","https://raw.githubusercontent.com/fogarea/assets/online-shop/products/17/2.jpg","https://raw.githubusercontent.com/fogarea/assets/online-shop/products/17/3.jpg"]},{"id":18,"title":"Восковые мелки 8 цв.","description":"Классические восковые мелки на основе пчелиного воска, который обеспечивает мягкость письма. Корпус круглый диаметром 7 мм, предварительно заточен, обернут в бумагу, устойчив к поломкам. Рисунки со временем не теряют яркости, благодаря компонентам отвечающим за УФ-защиту. Европейский сертификат качества гарантирует отсутствие в составе токсичных веществ.","price":102,"discountPercentage":0,"rating":4.8,"stock":778,"stockUsed":0,"show":true,"cart":false,"brand":{"id":5,"name":"Artberry"},"category":{"id":6,"name":"Детское творчество"},"thumbnail":"https://raw.githubusercontent.com/fogarea/assets/online-shop/products/18/thumbnail.jpg","images":["https://raw.githubusercontent.com/fogarea/assets/online-shop/products/18/0.jpg","https://raw.githubusercontent.com/fogarea/assets/online-shop/products/18/1.jpg","https://raw.githubusercontent.com/fogarea/assets/online-shop/products/18/2.jpg","https://raw.githubusercontent.com/fogarea/assets/online-shop/products/18/3.jpg","https://raw.githubusercontent.com/fogarea/assets/online-shop/products/18/4.jpg"]},{"id":19,"title":"Набор для раскрашивания \\"Карамелька\\"","description":"Любимых героев “ТРИ КОТА” теперь можно раскрасить самостоятельно! В комплект каждого набора входят специальные яркие краски, подобранные в соответствии с индивидуальной палитрой персонажа. Наборы развивают воображение, мелкую моторику и внимание.","price":259,"discountPercentage":0,"rating":4.2,"stock":120,"stockUsed":0,"show":true,"cart":false,"brand":{"id":6,"name":"1TOY"},"category":{"id":6,"name":"Детское творчество"},"thumbnail":"https://raw.githubusercontent.com/fogarea/assets/online-shop/products/19/thumbnail.jpg","images":["https://raw.githubusercontent.com/fogarea/assets/online-shop/products/19/0.jpg","https://raw.githubusercontent.com/fogarea/assets/online-shop/products/19/1.jpg"]},{"id":20,"title":"Холст для раскрашивания с блестками \\"Единорог\\"","description":"Раскрашивать картину-антистресс легко и приятно: вам понадобятся любые фломастеры, акварельные краски или цветные карандаши, которые можно слегка растушевать по холсту пальцем или ватой. На участки с блестками карандаш не ложится, а фломастер выглядит бледнее, но все равно придает цвет.","price":199,"discountPercentage":0.5,"rating":5,"stock":147,"stockUsed":0,"show":true,"cart":false,"brand":{"id":6,"name":"1TOY"},"category":{"id":6,"name":"Детское творчество"},"thumbnail":"https://raw.githubusercontent.com/fogarea/assets/online-shop/products/20/thumbnail.jpg","images":["https://raw.githubusercontent.com/fogarea/assets/online-shop/products/20/0.jpg","https://raw.githubusercontent.com/fogarea/assets/online-shop/products/20/1.jpg","https://raw.githubusercontent.com/fogarea/assets/online-shop/products/20/2.jpg"]}]')}},i={};function l(t){var e=i[t];if(void 0!==e){if(void 0!==e.error)throw e.error;return e.exports}var r=i[t]={id:t,exports:{}};try{var o={id:t,module:r,factory:n[t],require:l};l.i.forEach((function(t){t(o)})),r=o.module,o.factory.call(r.exports,r,r.exports,o.require)}catch(t){throw r.error=t,t}return r.exports}l.m=n,l.c=i,l.i=[],l.hu=t=>t+"."+l.h()+".hot-update.js",l.miniCssF=t=>{},l.hmrF=()=>"app."+l.h()+".hot-update.json",l.h=()=>"69ed9aa215bb4601b50b",l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),l.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t={},l.l=(e,r,o,a)=>{if(t[e])t[e].push(r);else{var s,n;if(void 0!==o)for(var i=document.getElementsByTagName("script"),c=0;c<i.length;c++){var d=i[c];if(d.getAttribute("src")==e){s=d;break}}s||(n=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,l.nc&&s.setAttribute("nonce",l.nc),s.src=e),t[e]=[r];var u=(r,o)=>{s.onerror=s.onload=null,clearTimeout(p);var a=t[e];if(delete t[e],s.parentNode&&s.parentNode.removeChild(s),a&&a.forEach((t=>t(o))),r)return r(o)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=u.bind(null,s.onerror),s.onload=u.bind(null,s.onload),n&&document.head.appendChild(s)}},l.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t,e,r,o={},a=l.c,s=[],n=[],i="idle",c=0,d=[];function u(t){i=t;for(var e=[],r=0;r<n.length;r++)e[r]=n[r].call(null,t);return Promise.all(e)}function p(){0==--c&&u("ready").then((function(){if(0===c){var t=d;d=[];for(var e=0;e<t.length;e++)t[e]()}}))}function h(t){if("idle"!==i)throw new Error("check() is only allowed in idle status");return u("check").then(l.hmrM).then((function(r){return r?u("prepare").then((function(){var o=[];return e=[],Promise.all(Object.keys(l.hmrC).reduce((function(t,a){return l.hmrC[a](r.c,r.r,r.m,t,e,o),t}),[])).then((function(){return e=function(){return t?g(t):u("ready").then((function(){return o}))},0===c?e():new Promise((function(t){d.push((function(){t(e())}))}));var e}))})):u(f()?"ready":"idle").then((function(){return null}))}))}function m(t){return"ready"!==i?Promise.resolve().then((function(){throw new Error("apply() is only allowed in ready status (state: "+i+")")})):g(t)}function g(t){t=t||{},f();var o=e.map((function(e){return e(t)}));e=void 0;var a=o.map((function(t){return t.error})).filter(Boolean);if(a.length>0)return u("abort").then((function(){throw a[0]}));var s=u("dispose");o.forEach((function(t){t.dispose&&t.dispose()}));var n,i=u("apply"),l=function(t){n||(n=t)},c=[];return o.forEach((function(t){if(t.apply){var e=t.apply(l);if(e)for(var r=0;r<e.length;r++)c.push(e[r])}})),Promise.all([s,i]).then((function(){return n?u("fail").then((function(){throw n})):r?g(t).then((function(t){return c.forEach((function(e){t.indexOf(e)<0&&t.push(e)})),t})):u("idle").then((function(){return c}))}))}function f(){if(r)return e||(e=[]),Object.keys(l.hmrI).forEach((function(t){r.forEach((function(r){l.hmrI[t](r,e)}))})),r=void 0,!0}l.hmrD=o,l.i.push((function(d){var g,f,_,v,b=d.module,y=function(e,r){var o=a[r];if(!o)return e;var n=function(n){if(o.hot.active){if(a[n]){var i=a[n].parents;-1===i.indexOf(r)&&i.push(r)}else s=[r],t=n;-1===o.children.indexOf(n)&&o.children.push(n)}else console.warn("[HMR] unexpected require("+n+") from disposed module "+r),s=[];return e(n)},l=function(t){return{configurable:!0,enumerable:!0,get:function(){return e[t]},set:function(r){e[t]=r}}};for(var d in e)Object.prototype.hasOwnProperty.call(e,d)&&"e"!==d&&Object.defineProperty(n,d,l(d));return n.e=function(t){return function(t){switch(i){case"ready":u("prepare");case"prepare":return c++,t.then(p,p),t;default:return t}}(e.e(t))},n}(d.require,d.id);b.hot=(g=d.id,f=b,v={_acceptedDependencies:{},_acceptedErrorHandlers:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:_=t!==g,_requireSelf:function(){s=f.parents.slice(),t=_?void 0:g,l(g)},active:!0,accept:function(t,e,r){if(void 0===t)v._selfAccepted=!0;else if("function"==typeof t)v._selfAccepted=t;else if("object"==typeof t&&null!==t)for(var o=0;o<t.length;o++)v._acceptedDependencies[t[o]]=e||function(){},v._acceptedErrorHandlers[t[o]]=r;else v._acceptedDependencies[t]=e||function(){},v._acceptedErrorHandlers[t]=r},decline:function(t){if(void 0===t)v._selfDeclined=!0;else if("object"==typeof t&&null!==t)for(var e=0;e<t.length;e++)v._declinedDependencies[t[e]]=!0;else v._declinedDependencies[t]=!0},dispose:function(t){v._disposeHandlers.push(t)},addDisposeHandler:function(t){v._disposeHandlers.push(t)},removeDisposeHandler:function(t){var e=v._disposeHandlers.indexOf(t);e>=0&&v._disposeHandlers.splice(e,1)},invalidate:function(){switch(this._selfInvalidated=!0,i){case"idle":e=[],Object.keys(l.hmrI).forEach((function(t){l.hmrI[t](g,e)})),u("ready");break;case"ready":Object.keys(l.hmrI).forEach((function(t){l.hmrI[t](g,e)}));break;case"prepare":case"check":case"dispose":case"apply":(r=r||[]).push(g)}},check:h,apply:m,status:function(t){if(!t)return i;n.push(t)},addStatusHandler:function(t){n.push(t)},removeStatusHandler:function(t){var e=n.indexOf(t);e>=0&&n.splice(e,1)},data:o[g]},t=void 0,v),b.parents=s,b.children=[],s=[],d.require=y})),l.hmrC={},l.hmrI={}})(),(()=>{var t;l.g.importScripts&&(t=l.g.location+"");var e=l.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");r.length&&(t=r[r.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),l.p=t+"../"})(),e=(t,e,r,o)=>{var a=document.createElement("link");return a.rel="stylesheet",a.type="text/css",a.onerror=a.onload=s=>{if(a.onerror=a.onload=null,"load"===s.type)r();else{var n=s&&("load"===s.type?"missing":s.type),i=s&&s.target&&s.target.href||e,l=new Error("Loading CSS chunk "+t+" failed.\n("+i+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=n,l.request=i,a.parentNode.removeChild(a),o(l)}},a.href=e,document.head.appendChild(a),a},r=(t,e)=>{for(var r=document.getElementsByTagName("link"),o=0;o<r.length;o++){var a=(n=r[o]).getAttribute("data-href")||n.getAttribute("href");if("stylesheet"===n.rel&&(a===t||a===e))return n}var s=document.getElementsByTagName("style");for(o=0;o<s.length;o++){var n;if((a=(n=s[o]).getAttribute("data-href"))===t||a===e)return n}},o=[],a=[],s=t=>({dispose:()=>{for(var t=0;t<o.length;t++){var e=o[t];e.parentNode&&e.parentNode.removeChild(e)}o.length=0},apply:()=>{for(var t=0;t<a.length;t++)a[t].rel="stylesheet";a.length=0}}),l.hmrC.miniCss=(t,n,i,c,d,u)=>{d.push(s),t.forEach((t=>{var s=l.miniCssF(t),n=l.p+s,i=r(s,n);i&&c.push(new Promise(((r,s)=>{var l=e(t,n,(()=>{l.as="style",l.rel="preload",r()}),s);o.push(i),a.push(l)})))}))},(()=>{var t,e,r,o,a,s=l.hmrS_jsonp=l.hmrS_jsonp||{143:0},n={};function i(e,r){return t=r,new Promise(((t,r)=>{n[e]=t;var o=l.p+l.hu(e),a=new Error;l.l(o,(t=>{if(n[e]){n[e]=void 0;var o=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;a.message="Loading hot update chunk "+e+" failed.\n("+o+": "+s+")",a.name="ChunkLoadError",a.type=o,a.request=s,r(a)}}))}))}function c(t){function n(t){for(var e=[t],r={},o=e.map((function(t){return{chain:[t],id:t}}));o.length>0;){var a=o.pop(),s=a.id,n=a.chain,c=l.c[s];if(c&&(!c.hot._selfAccepted||c.hot._selfInvalidated)){if(c.hot._selfDeclined)return{type:"self-declined",chain:n,moduleId:s};if(c.hot._main)return{type:"unaccepted",chain:n,moduleId:s};for(var d=0;d<c.parents.length;d++){var u=c.parents[d],p=l.c[u];if(p){if(p.hot._declinedDependencies[s])return{type:"declined",chain:n.concat([u]),moduleId:s,parentId:u};-1===e.indexOf(u)&&(p.hot._acceptedDependencies[s]?(r[u]||(r[u]=[]),i(r[u],[s])):(delete r[u],e.push(u),o.push({chain:n.concat([u]),id:u})))}}}}return{type:"accepted",moduleId:t,outdatedModules:e,outdatedDependencies:r}}function i(t,e){for(var r=0;r<e.length;r++){var o=e[r];-1===t.indexOf(o)&&t.push(o)}}l.f&&delete l.f.jsonpHmr,e=void 0;var c={},d=[],u={},p=function(t){console.warn("[HMR] unexpected require("+t.id+") to disposed module")};for(var h in r)if(l.o(r,h)){var m,g=r[h],f=!1,_=!1,v=!1,b="";switch((m=g?n(h):{type:"disposed",moduleId:h}).chain&&(b="\nUpdate propagation: "+m.chain.join(" -> ")),m.type){case"self-declined":t.onDeclined&&t.onDeclined(m),t.ignoreDeclined||(f=new Error("Aborted because of self decline: "+m.moduleId+b));break;case"declined":t.onDeclined&&t.onDeclined(m),t.ignoreDeclined||(f=new Error("Aborted because of declined dependency: "+m.moduleId+" in "+m.parentId+b));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(m),t.ignoreUnaccepted||(f=new Error("Aborted because "+h+" is not accepted"+b));break;case"accepted":t.onAccepted&&t.onAccepted(m),_=!0;break;case"disposed":t.onDisposed&&t.onDisposed(m),v=!0;break;default:throw new Error("Unexception type "+m.type)}if(f)return{error:f};if(_)for(h in u[h]=g,i(d,m.outdatedModules),m.outdatedDependencies)l.o(m.outdatedDependencies,h)&&(c[h]||(c[h]=[]),i(c[h],m.outdatedDependencies[h]));v&&(i(d,[m.moduleId]),u[h]=p)}r=void 0;for(var y,S=[],C=0;C<d.length;C++){var w=d[C],P=l.c[w];P&&(P.hot._selfAccepted||P.hot._main)&&u[w]!==p&&!P.hot._selfInvalidated&&S.push({module:w,require:P.hot._requireSelf,errorHandler:P.hot._selfAccepted})}return{dispose:function(){var t;o.forEach((function(t){delete s[t]})),o=void 0;for(var e,r=d.slice();r.length>0;){var a=r.pop(),n=l.c[a];if(n){var i={},u=n.hot._disposeHandlers;for(C=0;C<u.length;C++)u[C].call(null,i);for(l.hmrD[a]=i,n.hot.active=!1,delete l.c[a],delete c[a],C=0;C<n.children.length;C++){var p=l.c[n.children[C]];p&&((t=p.parents.indexOf(a))>=0&&p.parents.splice(t,1))}}}for(var h in c)if(l.o(c,h)&&(n=l.c[h]))for(y=c[h],C=0;C<y.length;C++)e=y[C],(t=n.children.indexOf(e))>=0&&n.children.splice(t,1)},apply:function(e){for(var r in u)l.o(u,r)&&(l.m[r]=u[r]);for(var o=0;o<a.length;o++)a[o](l);for(var s in c)if(l.o(c,s)){var n=l.c[s];if(n){y=c[s];for(var i=[],p=[],h=[],m=0;m<y.length;m++){var g=y[m],f=n.hot._acceptedDependencies[g],_=n.hot._acceptedErrorHandlers[g];if(f){if(-1!==i.indexOf(f))continue;i.push(f),p.push(_),h.push(g)}}for(var v=0;v<i.length;v++)try{i[v].call(null,y)}catch(r){if("function"==typeof p[v])try{p[v](r,{moduleId:s,dependencyId:h[v]})}catch(o){t.onErrored&&t.onErrored({type:"accept-error-handler-errored",moduleId:s,dependencyId:h[v],error:o,originalError:r}),t.ignoreErrored||(e(o),e(r))}else t.onErrored&&t.onErrored({type:"accept-errored",moduleId:s,dependencyId:h[v],error:r}),t.ignoreErrored||e(r)}}}for(var b=0;b<S.length;b++){var C=S[b],w=C.module;try{C.require(w)}catch(r){if("function"==typeof C.errorHandler)try{C.errorHandler(r,{moduleId:w,module:l.c[w]})}catch(o){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:w,error:o,originalError:r}),t.ignoreErrored||(e(o),e(r))}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:w,error:r}),t.ignoreErrored||e(r)}}return d}}}self.webpackHotUpdate=(e,o,s)=>{for(var i in o)l.o(o,i)&&(r[i]=o[i],t&&t.push(i));s&&a.push(s),n[e]&&(n[e](),n[e]=void 0)},l.hmrI.jsonp=function(t,e){r||(r={},a=[],o=[],e.push(c)),l.o(r,t)||(r[t]=l.m[t])},l.hmrC.jsonp=function(t,n,d,u,p,h){p.push(c),e={},o=n,r=d.reduce((function(t,e){return t[e]=!1,t}),{}),a=[],t.forEach((function(t){l.o(s,t)&&void 0!==s[t]?(u.push(i(t,h)),e[t]=!0):e[t]=!1})),l.f&&(l.f.jsonpHmr=function(t,r){e&&l.o(e,t)&&!e[t]&&(r.push(i(t)),e[t]=!0)})},l.hmrM=()=>{if("undefined"==typeof fetch)throw new Error("No browser support: need fetch API");return fetch(l.p+l.hmrF()).then((t=>{if(404!==t.status){if(!t.ok)throw new Error("Failed to fetch update manifest "+t.statusText);return t.json()}}))}})();l(303)})();